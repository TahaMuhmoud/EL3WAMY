var xr=Object.defineProperty;var kr=(t,e,r)=>e in t?xr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var y=(t,e,r)=>(kr(t,typeof e!="symbol"?e+"":e,r),r);function _r(t){return Object.keys(t).reduce((e,r)=>{var s=t[r];return e[r]=Object.assign({},s),!Xt(s.value)||function(n){return Object.prototype.toString.call(n)==="[object Function]"}(s.value)||Array.isArray(s.value)||(e[r].value=Object.assign({},s.value)),Array.isArray(s.value)&&(e[r].value=s.value.slice(0)),e},{})}function St(t){if(t)try{return JSON.parse(t)}catch{return t}}function Pt(t,e,r){if(r==null||r===!1)return t.removeAttribute(e);let s=JSON.stringify(r);t.__updating[e]=!0,s==="true"&&(s=""),t.setAttribute(e,s),Promise.resolve().then(()=>delete t.__updating[e])}function Xt(t){return t!=null&&(typeof t=="object"||typeof t=="function")}var Ee,$e;let Ke;function Cr(t,e){const r=Object.keys(e);return class extends t{static get observedAttributes(){return r.map(s=>e[s].attribute)}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(!this.__initialized){this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=function(a,l){const i=_r(l);return Object.keys(l).forEach(c=>{const u=i[c],p=a.getAttribute(u.attribute),h=a[c];p&&(u.value=u.parse?St(p):p),h!=null&&(u.value=Array.isArray(h)?h.slice(0):h),u.reflect&&Pt(a,u.attribute,u.value),Object.defineProperty(a,c,{get:()=>u.value,set(f){var d=u.value;u.value=f,u.reflect&&Pt(this,u.attribute,u.value);for(let m=0,R=this.__propertyChangedCallbacks.length;m<R;m++)this.__propertyChangedCallbacks[m](c,f,d)},enumerable:!0,configurable:!0})}),i}(this,e);var s=function(a){return Object.keys(a).reduce((l,i)=>(l[i]=a[i].value,l),{})}(this.props),n=this.Component,o=Ke;try{(Ke=this).__initialized=!0,function(a){return typeof a=="function"&&a.toString().indexOf("class")===0}(n)?new n(s,{element:this}):n(s,{element:this})}finally{Ke=o}}}async disconnectedCallback(){if(await Promise.resolve(),!this.isConnected){this.__propertyChangedCallbacks.length=0;for(var s=null;s=this.__releaseCallbacks.pop();)s(this);delete this.__initialized,this.__released=!0}}attributeChangedCallback(s,n,o){!this.__initialized||this.__updating[s]||(s=this.lookupProp(s))in e&&(o==null&&!this[s]||(this[s]=e[s].parse?St(o):o))}lookupProp(s){if(e)return r.find(n=>s===n||s===e[n].attribute)}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(s){this.__releaseCallbacks.push(s)}addPropertyChangedCallback(s){this.__propertyChangedCallbacks.push(s)}}}function Sr(t,e={},r={}){const{BaseElement:s=HTMLElement,extension:n}=r;return o=>{if(!t)throw new Error("tag is required to register a Component");let a=customElements.get(t);return a?a.prototype.Component=o:((a=Cr(s,function(l){return l?Object.keys(l).reduce((i,c)=>{var u=l[c];return i[c]=Xt(u)&&"value"in u?u:{value:u},i[c].attribute||(i[c].attribute=function(p){return p.replace(/\.?([A-Z]+)/g,(h,f)=>"-"+f.toLowerCase()).replace("_","-").replace(/^-/,"")}(c)),i[c].parse="parse"in i[c]?i[c].parse:typeof i[c].value!="string",i},{}):{}}(e))).prototype.Component=o,a.prototype.registeredTag=t,customElements.define(t,a,n)),a}}(Ee=self.document)&&!Ee.getElementById("livereloadscript")&&(($e=Ee.createElement("script")).async=1,$e.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",$e.id="livereloadscript",Ee.getElementsByTagName("head")[0].appendChild($e));const De=Symbol("solid-proxy"),Pr=Symbol("solid-track"),Ue={equals:(t,e)=>t===e};let Jt=er;const ae=1,Fe=2,Kt={owned:null,cleanups:null,context:null,owner:null};var U=null;let Qe=null,I=null,F=null,re=null,Ye=0;function je(t,e){const r=I,s=U,n=t.length===0,o=n?Kt:{owned:null,cleanups:null,context:null,owner:e===void 0?s:e},a=n?t:()=>t(()=>ne(()=>We(o)));U=o,I=null;try{return Pe(a,!0)}finally{I=r,U=s}}function q(t,e){const r={value:t,observers:null,observerSlots:null,comparator:(e=e?Object.assign({},Ue,e):Ue).equals||void 0};return[Qt.bind(r),s=>(typeof s=="function"&&(s=s(r.value)),Zt(r,s))]}function M(t,e,r){Se(wt(t,e,!1,ae))}function ue(t,e,r){Jt=Ar,(t=wt(t,e,!1,ae)).user=!0,re?re.push(t):Se(t)}function H(t,e,r){return r=r?Object.assign({},Ue,r):Ue,(t=wt(t,e,!0,0)).observers=null,t.observerSlots=null,t.comparator=r.equals||void 0,Se(t),Qt.bind(t)}function ne(t){if(I===null)return t();var e=I;I=null;try{return t()}finally{I=e}}function de(t){ue(()=>ne(t))}function mt(t){return U!==null&&(U.cleanups===null?U.cleanups=[t]:U.cleanups.push(t)),t}function Qt(){var t;return this.sources&&this.state&&(this.state===ae?Se(this):(t=F,F=null,Pe(()=>Ge(this),!1),F=t)),I&&(t=this.observers?this.observers.length:0,I.sources?(I.sources.push(this),I.sourceSlots.push(t)):(I.sources=[this],I.sourceSlots=[t]),this.observers?(this.observers.push(I),this.observerSlots.push(I.sources.length-1)):(this.observers=[I],this.observerSlots=[I.sources.length-1])),this.value}function Zt(t,e,r){var s=t.value;return t.comparator&&t.comparator(s,e)||(t.value=e,t.observers&&t.observers.length&&Pe(()=>{for(let a=0;a<t.observers.length;a+=1){var n=t.observers[a],o=Qe&&Qe.running;o&&Qe.disposed.has(n),(o?n.tState:n.state)||((n.pure?F:re).push(n),n.observers&&tr(n)),o||(n.state=ae)}if(1e6<F.length)throw F=[],new Error},!1)),e}function Se(t){var e,r,s;t.fn&&(We(t),e=U,r=I,s=Ye,function(n,o,a){let l;try{l=n.fn(o)}catch(i){return n.pure&&(n.state=ae,n.owned&&n.owned.forEach(We),n.owned=null),n.updatedAt=a+1,rr(i)}(!n.updatedAt||n.updatedAt<=a)&&(n.updatedAt!=null&&"observers"in n?Zt(n,l):n.value=l,n.updatedAt=a)}(I=U=t,t.value,s),I=r,U=e)}function wt(t,e,r,s=ae,n){return t={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:U,context:null,pure:r},U!==null&&U!==Kt&&(U.owned?U.owned.push(t):U.owned=[t]),t}function He(t){if(t.state!==0){if(t.state===Fe)return Ge(t);if(t.suspense&&ne(t.suspense.inFallback))return t.suspense.effects.push(t);const r=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Ye);)t.state&&r.push(t);for(let s=r.length-1;0<=s;s--){var e;(t=r[s]).state===ae?Se(t):t.state===Fe&&(e=F,F=null,Pe(()=>Ge(t,r[0]),!1),F=e)}}}function Pe(t,e){if(F)return t();let r=!1;e||(F=[]),re?r=!0:re=[],Ye++;try{var s=t();return function(n){if(F&&(er(F),F=null),!n){const o=re;re=null,o.length&&Pe(()=>Jt(o),!1)}}(r),s}catch(n){r||(re=null),F=null,rr(n)}}function er(t){for(let e=0;e<t.length;e++)He(t[e])}function Ar(t){let e,r=0;for(e=0;e<t.length;e++){var s=t[e];s.user?t[r++]=s:He(s)}for(e=0;e<r;e++)He(t[e])}function Ge(t,e){for(let n=t.state=0;n<t.sources.length;n+=1){var r,s=t.sources[n];s.sources&&((r=s.state)===ae?s!==e&&(!s.updatedAt||s.updatedAt<Ye)&&He(s):r===Fe&&Ge(s,e))}}function tr(t){for(let r=0;r<t.observers.length;r+=1){var e=t.observers[r];e.state||(e.state=Fe,(e.pure?F:re).push(e),e.observers&&tr(e))}}function We(t){let e;if(t.sources)for(;t.sources.length;){var r,s,n=t.sources.pop(),o=t.sourceSlots.pop(),a=n.observers;a&&a.length&&(r=a.pop(),s=n.observerSlots.pop(),o<a.length)&&(a[r.sourceSlots[s]=o]=r,n.observerSlots[o]=s)}if(t.owned){for(e=t.owned.length-1;0<=e;e--)We(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;0<=e;e--)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function rr(t){throw t}const Er=Symbol("fallback");function At(t){for(let e=0;e<t.length;e++)t[e]()}function C(t,e){return ne(()=>t(e||{}))}function Te(){return!0}const at={get:(t,e,r)=>e===De?r:t.get(e),has:(t,e)=>e===De||t.has(e),set:Te,deleteProperty:Te,getOwnPropertyDescriptor:(t,e)=>({configurable:!0,enumerable:!0,get:()=>t.get(e),set:Te,deleteProperty:Te}),ownKeys:t=>t.keys()};function Ze(t){return(t=typeof t=="function"?t():t)||{}}function ve(...t){let e=!1;for(let n=0;n<t.length;n++){var r=t[n];e=e||!!r&&De in r,t[n]=typeof r=="function"?(e=!0,H(r)):r}if(e)return new Proxy({get(n){for(let a=t.length-1;0<=a;a--){var o=Ze(t[a])[n];if(o!==void 0)return o}},has(n){for(let o=t.length-1;0<=o;o--)if(n in Ze(t[o]))return!0;return!1},keys(){var n=[];for(let o=0;o<t.length;o++)n.push(...Object.keys(Ze(t[o])));return[...new Set(n)]}},at);var s={};for(let n=t.length-1;0<=n;n--)if(t[n])for(const o in Object.getOwnPropertyDescriptors(t[n]))o in s||Object.defineProperty(s,o,{enumerable:!0,get(){for(let l=t.length-1;0<=l;l--){var a=(t[l]||{})[o];if(a!==void 0)return a}}});return s}function vt(t,...e){const r=new Set(e.flat());var s;if(De in t)return(s=e.map(o=>new Proxy({get:a=>o.includes(a)?t[a]:void 0,has:a=>o.includes(a)&&a in t,keys:()=>o.filter(a=>a in t)},at))).push(new Proxy({get:o=>r.has(o)?void 0:t[o],has:o=>!r.has(o)&&o in t,keys:()=>Object.keys(t).filter(o=>!r.has(o))},at)),s;const n=Object.getOwnPropertyDescriptors(t);return e.push(Object.keys(n).filter(o=>!r.has(o))),e.map(o=>{var a={};for(let l=0;l<o.length;l++){const i=o[l];i in t&&Object.defineProperty(a,i,n[i]||{get:()=>t[i],set:()=>!0,enumerable:!0})}return a})}function et(t){var e="fallback"in t&&{fallback:()=>t.fallback};return H(function(r,s,n={}){let o=[],a=[],l=[],i=0,c=1<s.length?[]:null;return mt(()=>At(l)),()=>{let u,p,h=r()||[];return h[Pr],ne(()=>{let d,m,R,v,b,$,x,B,z,N=h.length;if(N===0)i!==0&&(At(l),l=[],o=[],a=[],i=0,c=c&&[]),n.fallback&&(o=[Er],a[0]=je(le=>(l[0]=le,n.fallback())),i=1);else if(i===0){for(a=new Array(N),p=0;p<N;p++)o[p]=h[p],a[p]=je(f);i=N}else{for(R=new Array(N),v=new Array(N),c&&(b=new Array(N)),$=0,x=Math.min(i,N);$<x&&o[$]===h[$];$++);for(x=i-1,B=N-1;x>=$&&B>=$&&o[x]===h[B];x--,B--)R[B]=a[x],v[B]=l[x],c&&(b[B]=c[x]);for(d=new Map,m=new Array(B+1),p=B;p>=$;p--)z=h[p],u=d.get(z),m[p]=u===void 0?-1:u,d.set(z,p);for(u=$;u<=x;u++)z=o[u],(p=d.get(z))!==void 0&&p!==-1?(R[p]=a[u],v[p]=l[u],c&&(b[p]=c[u]),p=m[p],d.set(z,p)):l[u]();for(p=$;p<N;p++)p in R?(a[p]=R[p],l[p]=v[p],c&&(c[p]=b[p],c[p](p))):a[p]=je(f);a=a.slice(0,i=N),o=h.slice(0)}return a});function f(d){var m;return l[p]=d,c?([d,m]=q(p),c[p]=m,s(h[p],d)):s(h[p])}}}(()=>t.each,t.children,e||void 0))}function G(t){const e=t.keyed,r=H(()=>t.when,void 0,{equals:(s,n)=>e?s===n:!s==!n});return H(()=>{const s=r();if(s){const n=t.children;return typeof n=="function"&&0<n.length?ne(()=>n(e?s:()=>{if(ne(r))return t.when;throw(o=>`Stale read from <${o}>.`)("Show")})):n}return t.fallback},void 0,void 0)}const $r=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),Tr=new Set(["innerHTML","textContent","innerText","children"]),Rr=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Or=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}}),Br=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Lr={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Et="_$DX_DELEGATE";function T(t,e,r){let s;const n=()=>{var o=document.createElement("template");return o.innerHTML=t,(r?o.content.firstChild:o.content).firstChild};return(e=e?()=>(s=s||n()).cloneNode(!0):()=>ne(()=>document.importNode(s=s||n(),!0))).cloneNode=e}function xe(t,e=window.document){var r=e[Et]||(e[Et]=new Set);for(let n=0,o=t.length;n<o;n++){var s=t[n];r.has(s)||(r.add(s),e.addEventListener(s,Nr))}}function se(t,e,r){r==null?t.removeAttribute(e):t.setAttribute(e,r)}function pe(t,e){e==null?t.removeAttribute("class"):t.className=e}function Ae(t,e={},r,s){const n={};return s||M(()=>n.children=we(t,e.children,n.children)),M(()=>e.ref&&e.ref(t)),M(()=>function(o,a,l,i,c={},u=!1){a=a||{};for(const h in c)h in a||h!=="children"&&(c[h]=Tt(o,h,null,c[h],l,u));for(const h in a){var p;h==="children"?i||we(o,a.children):(p=a[h],c[h]=Tt(o,h,p,c[h],l,u))}}(t,e,r,!0,n,!0)),n}function ie(t,e,r){return ne(()=>t(e,r))}function O(t,e,r,s){if(r!==void 0&&(s=s||[]),typeof e!="function")return we(t,e,s,r);M(n=>we(t,e(),n,r),s)}function $t(t,e,r){var s=e.trim().split(/\s+/);for(let n=0,o=s.length;n<o;n++)t.classList.toggle(s[n],r)}function Tt(t,e,r,s,n,o){let a,l,i,c,u;var p;return e==="style"?function(h,f,d){if(!f)return d?se(h,"style"):f;var m=h.style;if(typeof f=="string")return m.cssText=f;let R,v;for(v in typeof d=="string"&&(m.cssText=d=void 0),f=f||{},d=d||{})f[v]==null&&m.removeProperty(v),delete d[v];for(v in f)(R=f[v])!==d[v]&&(m.setProperty(v,R),d[v]=R);return d}(t,r,s):e==="classList"?function(h,f,d={}){var m=Object.keys(f||{}),R=Object.keys(d);let v,b;for(v=0,b=R.length;v<b;v++){var $=R[v];$&&$!=="undefined"&&!f[$]&&($t(h,$,!1),delete d[$])}for(v=0,b=m.length;v<b;v++){var x=m[v],B=!!f[x];x&&x!=="undefined"&&d[x]!==B&&B&&($t(h,x,!0),d[x]=B)}return d}(t,r,s):r===s?s:(e==="ref"?o||r(t):e.slice(0,3)==="on:"?(o=e.slice(3),s&&t.removeEventListener(o,s),r&&t.addEventListener(o,r)):e.slice(0,10)==="oncapture:"?(o=e.slice(10),s&&t.removeEventListener(o,s,!0),r&&t.addEventListener(o,r,!0)):e.slice(0,2)==="on"?(o=e.slice(2).toLowerCase(),!(p=Br.has(o))&&s&&(s=Array.isArray(s)?s[0]:s,t.removeEventListener(o,s)),(p||r)&&(function(h,f,d,m){if(m)Array.isArray(d)?(h["$$"+f]=d[0],h[`$$${f}Data`]=d[1]):h["$$"+f]=d;else if(Array.isArray(d)){const R=d[0];h.addEventListener(f,d[0]=v=>R.call(h,d[1],v))}else h.addEventListener(f,d)}(t,o,r,p),p)&&xe([o])):e.slice(0,5)==="attr:"?se(t,e.slice(5),r):(u=e.slice(0,5)==="prop:")||(i=Tr.has(e))||!n&&((c=function(h,f){return typeof(h=Or[h])=="object"?h[f]?h.$:void 0:h}(e,t.tagName))||(l=$r.has(e)))||(a=t.nodeName.includes("-"))?(u&&(e=e.slice(5),l=!0),e==="class"||e==="className"?pe(t,r):!a||l||i?t[c||e]=r:t[function(h){return h.toLowerCase().replace(/-([a-z])/g,(f,d)=>d.toUpperCase())}(e)]=r):(s=n&&-1<e.indexOf(":")&&Lr[e.split(":")[0]])?function(h,f,d,m){m==null?h.removeAttributeNS(f,d):h.setAttributeNS(f,d,m)}(t,s,e,r):se(t,Rr[e]||e,r),r)}function Nr(t){var e="$$"+t.type;let r=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==r&&Object.defineProperty(t,"target",{configurable:!0,value:r}),Object.defineProperty(t,"currentTarget",{configurable:!0,get:()=>r||document});r;){var s=r[e];if(s&&!r.disabled){var n=r[e+"Data"];if(n!==void 0?s.call(r,n,t):s.call(r,t),t.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function we(t,e,r,s,n){for(;typeof r=="function";)r=r();if(e!==r){var o=typeof e,a=s!==void 0;if(t=a&&r[0]&&r[0].parentNode||t,o=="string"||o=="number")if(o=="number"&&(e=e.toString()),a){let l=r[0];l&&l.nodeType===3?l.data=e:l=document.createTextNode(e),r=ge(t,r,s,l)}else r=r!==""&&typeof r=="string"?t.firstChild.data=e:t.textContent=e;else if(e==null||o=="boolean")r=ge(t,r,s);else{if(o=="function")return M(()=>{let l=e();for(;typeof l=="function";)l=l();r=we(t,l,r,s)}),()=>r;if(Array.isArray(e)){const l=[];if(o=r&&Array.isArray(r),lt(l,e,r,n))return M(()=>r=we(t,l,r,s,!0)),()=>r;if(l.length===0){if(r=ge(t,r,s),a)return r}else o?r.length===0?Rt(t,l,s):function(i,c,u){let p=u.length,h=c.length,f=p,d=0,m=0,R=c[h-1].nextSibling,v=null;for(;d<h||m<f;)if(c[d]===u[m])d++,m++;else{for(;c[h-1]===u[f-1];)h--,f--;if(h===d)for(var b=f<p?m?u[m-1].nextSibling:u[f-m]:R;m<f;)i.insertBefore(u[m++],b);else if(f===m)for(;d<h;)v&&v.has(c[d])||c[d].remove(),d++;else if(c[d]===u[f-1]&&u[m]===c[h-1]){var $=c[--h].nextSibling;i.insertBefore(u[m++],c[d++].nextSibling),i.insertBefore(u[--f],$),c[h]=u[f]}else{if(!v){v=new Map;let z=m;for(;z<f;)v.set(u[z],z++)}var x=v.get(c[d]);if(x!=null)if(m<x&&x<f){let z,N=d,le=1;for(;++N<h&&N<f&&(z=v.get(c[N]))!=null&&z===x+le;)le++;if(le>x-m)for(var B=c[d];m<x;)i.insertBefore(u[m++],B);else i.replaceChild(u[m++],c[d++])}else d++;else c[d++].remove()}}}(t,r,l):(r&&ge(t),Rt(t,l));r=l}else if(e instanceof Node){if(Array.isArray(r)){if(a)return r=ge(t,r,s,e);ge(t,r,null,e)}else r!=null&&r!==""&&t.firstChild?t.replaceChild(e,t.firstChild):t.appendChild(e);r=e}else console.warn("Unrecognized value. Skipped inserting",e)}}return r}function lt(t,e,r,s){let n=!1;for(let a=0,l=e.length;a<l;a++){let i=e[a],c=r&&r[a];if(i instanceof Node)t.push(i);else if(i!=null&&i!==!0&&i!==!1)if(Array.isArray(i))n=lt(t,i,c)||n;else if(typeof i=="function")if(s){for(;typeof i=="function";)i=i();n=lt(t,Array.isArray(i)?i:[i],Array.isArray(c)?c:[c])||n}else t.push(i),n=!0;else{var o=String(i);c&&c.nodeType===3?(c.data=o,t.push(c)):t.push(document.createTextNode(o))}}return n}function Rt(t,e,r=null){for(let s=0,n=e.length;s<n;s++)t.insertBefore(e[s],r)}function ge(t,e,r,s){if(r===void 0)return t.textContent="";var n=s||document.createTextNode("");if(e.length){let l=!1;for(let i=e.length-1;0<=i;i--){var o,a=e[i];n!==a?(o=a.parentNode===t,l||i?o&&a.remove():o?t.replaceChild(n,a):t.insertBefore(n,r)):l=!0}}else t.insertBefore(n,r);return[n]}function jr(t){return(e,r)=>{const s=r.element;return je(n=>{const o=function(l){var i=Object.keys(l),c={};for(let u=0;u<i.length;u++){const[p,h]=q(l[i[u]]);Object.defineProperty(c,i[u],{get:p,set(f){h(()=>f)}})}return c}(e);s.addPropertyChangedCallback((l,i)=>o[l]=i),s.addReleaseCallback(()=>{s.renderRoot.textContent="",n()});var a=t(o,r);return O(s.renderRoot,a)},function(n){if(n.assignedSlot&&n.assignedSlot._$owner)return n.assignedSlot._$owner;let o=n.parentNode;for(;o&&!o._$owner&&(!o.assignedSlot||!o.assignedSlot._$owner);)o=o.parentNode;return(o&&o.assignedSlot?o.assignedSlot:n)._$owner}(s))}}function Ot(t,e,r){return arguments.length===2&&(r=e,e={}),Sr(t,e)(jr(r))}const Bt={chatflowid:"",apiHost:void 0,chatflowConfig:void 0,theme:void 0};var Ve='/*! tailwindcss v3.3.1 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-feature-settings:normal;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pointer-events-none{pointer-events:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.bottom-20{bottom:80px}.bottom-24{bottom:96px}.left-0{left:0}.top-0{top:0}.z-10{z-index:10}.my-2{margin-bottom:8px;margin-top:8px}.-ml-1{margin-left:-4px}.mb-2{margin-bottom:8px}.ml-1{margin-left:4px}.ml-2{margin-left:8px}.mr-1{margin-right:4px}.mr-2{margin-right:8px}.mr-3{margin-right:12px}.block{display:block}.flex{display:flex}.hidden{display:none}.h-10{height:40px}.h-12{height:48px}.h-16{height:64px}.h-2{height:8px}.h-32{height:128px}.h-5{height:20px}.h-6{height:24px}.h-7{height:28px}.h-9{height:36px}.h-full{height:100%}.max-h-\\[704px\\]{max-height:704px}.min-h-full{min-height:100%}.w-10{width:40px}.w-12{width:48px}.w-16{width:64px}.w-2{width:8px}.w-5{width:20px}.w-6{width:24px}.w-7{width:28px}.w-9{width:36px}.w-full{width:100%}.min-w-full{min-width:100%}.max-w-full{max-width:100%}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-rotate-180{--tw-rotate:-180deg}.-rotate-180,.rotate-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-0{--tw-rotate:0deg}.scale-0{--tw-scale-x:0;--tw-scale-y:0}.scale-0,.scale-100{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x:1;--tw-scale-y:1}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.animate-fade-in{animation:fade-in .3s ease-out}@keyframes spin{to{transform:rotate(1turn)}}.animate-spin{animation:spin 1s linear infinite}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.overflow-y-scroll{overflow-y:scroll}.scroll-smooth{scroll-behavior:smooth}.whitespace-pre-wrap{white-space:pre-wrap}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:8px}.border{border-width:1px}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-opacity-50{--tw-bg-opacity:0.5}.bg-cover{background-size:cover}.bg-center{background-position:50%}.fill-transparent{fill:transparent}.stroke-2{stroke-width:2}.object-cover{-o-object-fit:cover;object-fit:cover}.p-4{padding:16px}.px-2{padding-left:8px;padding-right:8px}.px-3{padding-left:12px;padding-right:12px}.px-4{padding-left:16px;padding-right:16px}.py-1{padding-bottom:4px;padding-top:4px}.py-2{padding-bottom:8px;padding-top:8px}.py-4{padding-bottom:16px;padding-top:16px}.pt-10{padding-top:40px}.text-left{text-align:left}.text-center{text-align:center}.text-base{font-size:16px;line-height:24px}.text-sm{font-size:14px;line-height:20px}.text-xl{font-size:20px;line-height:28px}.font-semibold{font-weight:600}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.shadow-md,.shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-200{transition-duration:.2s}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}:host{--chatbot-container-bg-image:none;--chatbot-container-bg-color:transparent;--chatbot-container-font-family:"Open Sans";--chatbot-button-bg-color:#0042da;--chatbot-button-color:#fff;--chatbot-host-bubble-bg-color:#f7f8ff;--chatbot-host-bubble-color:#303235;--chatbot-guest-bubble-bg-color:#3b81f6;--chatbot-guest-bubble-color:#fff;--chatbot-input-bg-color:#fff;--chatbot-input-color:#303235;--chatbot-input-placeholder-color:#9095a0;--chatbot-header-bg-color:#fff;--chatbot-header-color:#303235;--chatbot-border-radius:6px;--PhoneInputCountryFlag-borderColor:transparent;--PhoneInput-color--focus:transparent}a{color:#16bed7;font-weight:500}a:hover{text-decoration:underline}pre{word-wrap:break-word;font-size:13px;margin:5px;overflow:auto;padding:5px;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;width:auto}.string{color:green}.number{color:#ff8c00}.boolean{color:blue}.null{color:#f0f}.key{color:#002b36}.scrollable-container::-webkit-scrollbar{display:none}.scrollable-container{-ms-overflow-style:none;scrollbar-width:none}.text-fade-in{transition:opacity .4s ease-in .2s}.bubble-typing{transition:width .4s ease-out,height .4s ease-out}.bubble1,.bubble2,.bubble3{background-color:var(--chatbot-host-bubble-color);opacity:.5}.bubble1,.bubble2{animation:chatBubbles 1s ease-in-out infinite}.bubble2{animation-delay:.3s}.bubble3{animation:chatBubbles 1s ease-in-out infinite;animation-delay:.5s}@keyframes chatBubbles{0%{transform:translateY(0)}50%{transform:translateY(-5px)}to{transform:translateY(0)}}button,input,textarea{font-weight:300}.slate-a{text-decoration:underline}.slate-html-container>div{min-height:24px}.slate-bold{font-weight:700}.slate-italic{font-style:oblique}.slate-underline{text-decoration:underline}.text-input::-moz-placeholder{color:#9095a0!important;opacity:1!important}.text-input::placeholder{color:#9095a0!important;opacity:1!important}.chatbot-container{background-color:var(--chatbot-container-bg-color);background-image:var(--chatbot-container-bg-image);font-family:Open Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.file-annotation-button{background-color:#02a0a0c2;border:1px solid #02a0a0c2;border-radius:var(--chatbot-border-radius);color:var(--chatbot-button-color)}.chatbot-button{background-color:#0042da;border:1px solid #0042da;border-radius:var(--chatbot-border-radius);color:var(--chatbot-button-color)}.chatbot-button.selectable{border:1px solid #0042da}.chatbot-button.selectable,.chatbot-host-bubble{background-color:#f7f8ff;color:var(--chatbot-host-bubble-color)}.chatbot-host-bubble>.bubble-typing{background-color:#f7f8ff;border:var(--chatbot-host-bubble-border);border-radius:6px}.chatbot-host-bubble iframe,.chatbot-host-bubble img,.chatbot-host-bubble video{border-radius:var(--chatbot-border-radius)}.chatbot-guest-bubble{background-color:#3b81f6;border-radius:6px;color:var(--chatbot-guest-bubble-color)}.chatbot-input{background-color:#fff;border-radius:var(--chatbot-border-radius);box-shadow:0 2px 6px -1px rgba(0,0,0,.1);color:#303235}.chatbot-input-error-message{color:#303235}.chatbot-button>.send-icon{fill:var(--chatbot-button-color)}.chatbot-chat-view{max-width:800px}.ping span{background-color:#0042da}.rating-icon-container svg{stroke:#0042da;fill:#f7f8ff;height:42px;transition:fill .1s ease-out;width:42px}.rating-icon-container.selected svg{fill:#0042da}.rating-icon-container:hover svg{filter:brightness(.9)}.rating-icon-container:active svg{filter:brightness(.75)}.upload-progress-bar{background-color:#0042da;border-radius:var(--chatbot-border-radius)}.total-files-indicator{background-color:#0042da;color:var(--chatbot-button-color);font-size:10px}.chatbot-upload-input{transition:border-color .1s ease-out}.chatbot-upload-input.dragging-over{border-color:#0042da}.secondary-button{background-color:#f7f8ff;border-radius:var(--chatbot-border-radius);color:var(--chatbot-host-bubble-color)}.chatbot-country-select{color:#303235}.chatbot-country-select,.chatbot-date-input{background-color:#fff;border-radius:var(--chatbot-border-radius)}.chatbot-date-input{color:#303235;color-scheme:light}.chatbot-popup-blocked-toast{border-radius:var(--chatbot-border-radius)}.messagelist{border-radius:.5rem;height:100%;overflow-y:scroll;width:100%}.messagelistloading{display:flex;justify-content:center;margin-top:1rem;width:100%}.usermessage{padding:1rem 1.5rem}.usermessagewaiting-light{background:linear-gradient(270deg,#ede7f6,#e3f2fd,#ede7f6);background-position:-100% 0;background-size:200% 200%}.usermessagewaiting-dark,.usermessagewaiting-light{animation:loading-gradient 2s ease-in-out infinite;animation-direction:alternate;animation-name:loading-gradient;padding:1rem 1.5rem}.usermessagewaiting-dark{background:linear-gradient(270deg,#2e2352,#1d3d60,#2e2352);background-position:-100% 0;background-size:200% 200%;color:#ececf1}@keyframes loading-gradient{0%{background-position:-100% 0}to{background-position:100% 0}}.apimessage{animation:fadein .5s;padding:1rem 1.5rem}@keyframes fadein{0%{opacity:0}to{opacity:1}}.apimessage,.usermessage,.usermessagewaiting{display:flex}.markdownanswer{line-height:1.75}.markdownanswer a:hover{opacity:.8}.markdownanswer a{color:#16bed7;font-weight:500}.markdownanswer code{color:#15cb19;font-weight:500;white-space:pre-wrap!important}.markdownanswer ol,.markdownanswer ul{margin:1rem}.boticon,.usericon{border-radius:1rem;margin-right:1rem}.markdownanswer h1,.markdownanswer h2,.markdownanswer h3{font-size:inherit}.center{flex-direction:column;padding:10px;position:relative}.center,.cloud{align-items:center;display:flex;justify-content:center}.cloud{border-radius:.5rem;height:calc(100% - 50px);width:400px}input{background-color:transparent;border:none;font-family:Poppins,sans-serif;padding:10px}.hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:brightness-90:hover{--tw-brightness:brightness(.9);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.active\\:scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\\:brightness-75:active{--tw-brightness:brightness(.75);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.disabled\\:brightness-100:disabled{--tw-brightness:brightness(1);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}@media (min-width:640px){.sm\\:right-5{right:20px}.sm\\:my-8{margin-bottom:32px;margin-top:32px}.sm\\:w-\\[400px\\]{width:400px}.sm\\:w-full{width:100%}.sm\\:max-w-lg{max-width:512px}.sm\\:p-0{padding:0}}';const sr=t=>t==null,Lt=t=>t!=null,Ie=async t=>{try{var e=typeof t=="string"?t:t.url,r=await fetch(e,{method:typeof t=="string"?"GET":t.method,mode:"cors",headers:typeof t!="string"&&Lt(t.body)?{"Content-Type":"application/json"}:void 0,body:typeof t!="string"&&Lt(t.body)?JSON.stringify(t.body):void 0});let n;var s=r.headers.get("Content-Type");if(n=s&&s.includes("application/json")?await r.json():typeof t!="string"&&t.type==="blob"?await r.blob():await r.text(),r.ok)return{data:n};{let o;throw o=typeof n=="object"&&"error"in n?n.error:n||r.statusText}}catch(n){return console.error(n),{error:n}}},Ir=T('<svg viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">'),Mr=T('<img alt="Bubble button icon">'),zr=T('<button part="button"><svg viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.601 8.39897C18.269 8.06702 17.7309 8.06702 17.3989 8.39897L12 13.7979L6.60099 8.39897C6.26904 8.06702 5.73086 8.06702 5.39891 8.39897C5.06696 8.73091 5.06696 9.2691 5.39891 9.60105L11.3989 15.601C11.7309 15.933 12.269 15.933 12.601 15.601L18.601 9.60105C18.9329 9.2691 18.9329 8.73091 18.601 8.39897Z">'),qr=t=>{{const e=zr(),r=e.firstChild;return e.$$click=()=>t.toggleBot(),e.style.setProperty("z-index","42424242"),O(e,C(G,{get when(){return sr(t.customIconSrc)},keyed:!0,get children(){const s=Ir();return M(n=>{var o=t.iconColor??"white",a="stroke-2 fill-transparent absolute duration-200 transition "+(t.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100")+(t.size==="large"?" w-9":" w-7");return o!==n._v$&&((n._v$=o)!=null?s.style.setProperty("stroke",o):s.style.removeProperty("stroke")),a!==n._v$2&&se(s,"class",n._v$2=a),n},{_v$:void 0,_v$2:void 0}),s}}),r),O(e,C(G,{get when(){return t.customIconSrc},get children(){const s=Mr();return M(n=>{var o=t.customIconSrc,a="rounded-full object-cover"+(t.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100")+(t.size==="large"?" w-9 h-9":" w-7 h-7");return o!==n._v$3&&se(s,"src",n._v$3=o),a!==n._v$4&&pe(s,n._v$4=a),n},{_v$3:void 0,_v$4:void 0}),s}}),r),M(s=>{var n="fixed shadow-md rounded-full hover:scale-110 active:scale-95 transition-transform duration-200 flex justify-center items-center animate-fade-in"+(t.size==="large"?" w-16 h-16":" w-12 h-12"),o=t.backgroundColor??"#3B81F6",a=t.right?t.right.toString()+"px":"20px",l=t.bottom?t.bottom.toString()+"px":"20px",i=t.iconColor??"white",c="absolute duration-200 transition "+(t.isBotOpened?"scale-100 rotate-0 opacity-100":"scale-0 -rotate-180 opacity-0")+(t.size==="large"?" w-9":" w-7");return n!==s._v$5&&pe(e,s._v$5=n),o!==s._v$6&&((s._v$6=o)!=null?e.style.setProperty("background-color",o):e.style.removeProperty("background-color")),a!==s._v$7&&((s._v$7=a)!=null?e.style.setProperty("right",a):e.style.removeProperty("right")),l!==s._v$8&&((s._v$8=l)!=null?e.style.setProperty("bottom",l):e.style.removeProperty("bottom")),i!==s._v$9&&((s._v$9=i)!=null?r.style.setProperty("fill",i):r.style.removeProperty("fill")),c!==s._v$10&&se(r,"class",s._v$10=c),s},{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),e}};let tt;xe(["click"]);const Dr=new Uint8Array(16);function Ur(){if(tt=tt||typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto))return tt(Dr);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}const D=[];for(let t=0;t<256;++t)D.push((t+256).toString(16).slice(1));var k,P,Nt={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function jt(t,e,r){if(Nt.randomUUID&&!e&&!t)return Nt.randomUUID();var s=(t=t||{}).random||(t.rng||Ur)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){r=r||0;for(let n=0;n<16;++n)e[r+n]=s[n];return e}return function(n,o=0){return D[n[o+0]]+D[n[o+1]]+D[n[o+2]]+D[n[o+3]]+"-"+D[n[o+4]]+D[n[o+5]]+"-"+D[n[o+6]]+D[n[o+7]]+"-"+D[n[o+8]]+D[n[o+9]]+"-"+D[n[o+10]]+D[n[o+11]]+D[n[o+12]]+D[n[o+13]]+D[n[o+14]]+D[n[o+15]]}(s)}const Fr=({apiHost:t="http://localhost:3000",body:e})=>Ie({method:"POST",url:t+"/api/v1/openai-assistants-file",body:e,type:"blob"}),Hr=T('<input class="focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100" type="text">'),Gr=t=>{const[e,r]=vt(t,["ref","onInput"]);return(s=Hr()).$$input=o=>e.onInput(o.currentTarget.value),typeof(n=t.ref)=="function"?ie(n,s):t.ref=s,Ae(s,ve({get disabled(){return t.disabled},get style(){return{"font-size":t.fontSize?t.fontSize+"px":"16px"}}},r),!1,!1),s;var s,n},[Ce,yn]=(xe(["input"]),q()),Wr=T('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="19px"><path d="M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z">'),Vr=t=>{return Ae(e=Wr(),ve({get style(){return{fill:t.color??"#3B81F6"}}},t),!0,!0),e;var e},Yr=T('<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-refresh" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"></path><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4">'),Xr=t=>{{const e=Yr();return M(()=>se(e,"stroke",t.color??"#3B81F6")),e}},nr=T('<button type="submit">'),Jr=T('<svg><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">'),Kr=t=>{return Ae(e=nr(),ve({get disabled(){return t.isDisabled||t.isLoading}},t,{get class(){return"py-2 px-4 justify-center font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 chatbot-button "+t.class},style:{background:"transparent",border:"none"}}),!1,!0),O(e,C(G,{get when(){return!t.isLoading},get fallback(){return C(or,{class:"text-white"})},get children(){return C(Vr,{get color(){return t.sendButtonColor},get class(){return"send-icon flex "+(t.disableIcon?"hidden":"")}})}})),e;var e},Qr=t=>{return Ae(e=nr(),ve({get disabled(){return t.isDisabled||t.isLoading}},t,{get class(){return"py-2 px-4 justify-center font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 chatbot-button "+t.class},style:{background:"transparent",border:"none"},title:"New Chat"}),!1,!0),O(e,C(G,{get when(){return!t.isLoading},get fallback(){return C(or,{class:"text-white"})},get children(){return C(Xr,{get color(){return t.sendButtonColor},get class(){return"send-icon flex "+(t.disableIcon?"hidden":"")}})}})),e;var e},or=t=>{return Ae(e=Jr(),ve(t,{get class(){return"animate-spin -ml-1 mr-3 h-5 w-5 "+t.class},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","data-testid":"loading-spinner"}),!0,!0),e;var e},Zr=T("<span>Send"),es=T('<div class="flex items-end justify-between chatbot-input" data-testid="input">'),ts=t=>{const[e,r]=q(t.defaultValue??"");let s;const n=l=>r(l),o=()=>{e()!==""&&(s!=null&&s.reportValidity())&&t.onSubmit(e()),r("")},a=l=>{var i=l.isComposing||l.keyCode===229;l.key!=="Enter"||i||o()};ue(()=>{t.disabled||Ce()||!s||s.focus()}),de(()=>{!Ce()&&s&&s.focus()});{const l=es();return l.$$keydown=a,l.style.setProperty("border-top","1px solid #eeeeee"),l.style.setProperty("position","absolute"),l.style.setProperty("left","20px"),l.style.setProperty("right","20px"),l.style.setProperty("bottom","40px"),l.style.setProperty("margin","auto"),l.style.setProperty("z-index","1000"),O(l,C(Gr,{ref(i){typeof s=="function"?s(i):s=i},onInput:n,get value(){return e()},get fontSize(){return t.fontSize},get disabled(){return t.disabled},get placeholder(){return t.placeholder??"Type your question"}}),null),O(l,C(Kr,{get sendButtonColor(){return t.sendButtonColor},type:"button",get isDisabled(){return t.disabled||e()===""},class:"my-2 ml-2","on:click":o,get children(){var i=Zr();return i.style.setProperty("font-family","Poppins, sans-serif"),i}}),null),M(i=>{var c=t.backgroundColor??"#ffffff",u=t.textColor??"#303235";return c!==i._v$&&((i._v$=c)!=null?l.style.setProperty("background-color",c):l.style.removeProperty("background-color")),u!==i._v$2&&((i._v$2=u)!=null?l.style.setProperty("color",u):l.style.removeProperty("color")),i},{_v$:void 0,_v$2:void 0}),l}},rs=(xe(["keydown"]),T('<figure data-testid="default-avatar"><svg width="75" height="75" viewBox="0 0 75 75" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="mask0" x="0" y="0" mask-type="alpha"><circle cx="37.5" cy="37.5" r="37.5" fill="#0042DA"></circle></mask><g mask="url(#mask0)"><rect x="-30" y="-43" width="131" height="154" fill="#0042DA"></rect><rect x="2.50413" y="120.333" width="81.5597" height="86.4577" rx="2.5" transform="rotate(-52.6423 2.50413 120.333)" stroke="#FED23D" stroke-width="5"></rect><circle cx="76.5" cy="-1.5" r="29" stroke="#FF8E20" stroke-width="5"></circle><path d="M-49.8224 22L-15.5 -40.7879L18.8224 22H-49.8224Z" stroke="#F7F8FF" stroke-width="5">')),ss=()=>{{const t=rs(),e=t.firstChild;return M(r=>{var s="flex justify-center items-center rounded-full text-white relative "+(Ce()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),n="absolute top-0 left-0 "+(Ce()?" w-6 h-6 text-sm":"w-full h-full text-xl");return s!==r._v$&&pe(t,r._v$=s),n!==r._v$2&&se(e,"class",r._v$2=n),r},{_v$:void 0,_v$2:void 0}),t}},ns=T('<figure><img alt="Bot avatar" class="rounded-full object-cover w-full h-full">'),xt=t=>{const[e,r]=q(t.initialAvatarSrc);return ue(()=>{var s,n;(s=e())!=null&&s.startsWith("{{")&&((n=t.initialAvatarSrc)!=null&&n.startsWith("http"))&&r(t.initialAvatarSrc)}),C(G,{get when(){return(s=>s!=null&&s!=="")(e())},keyed:!0,get fallback(){return C(ss,{})},get children(){const s=ns(),n=s.firstChild;return M(o=>{var a="flex justify-center items-center rounded-full text-white relative flex-shrink-0 "+(Ce()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),l=e();return a!==o._v$&&pe(s,o._v$=a),l!==o._v$2&&se(n,"src",o._v$2=l),o},{_v$:void 0,_v$2:void 0}),s}})};class J{constructor(e,r=""){y(this,"source");y(this,"flags");this.source=e.source,this.flags=r}setGroup(e,r){let s=typeof r=="string"?r:r.source;return s=s.replace(/(^|[^\[])\^/g,"$1"),this.source=this.source.replace(e,s),this}getRegexp(){return new RegExp(this.source,this.flags)}}const os=/[&<>"']/,is=/[&<>"']/g,It={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},as=/[<>"']|&(?!#?\w+;)/,ls=/[<>"']|&(?!#?\w+;)/g;function cs(t,e){if(e){if(os.test(t))return t.replace(is,r=>It[r])}else if(as.test(t))return t.replace(ls,r=>It[r]);return t}function hs(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,r){return(r=r.toLowerCase())==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""})}(function(t){t[t.space=1]="space",t[t.text=2]="text",t[t.paragraph=3]="paragraph",t[t.heading=4]="heading",t[t.listStart=5]="listStart",t[t.listEnd=6]="listEnd",t[t.looseItemStart=7]="looseItemStart",t[t.looseItemEnd=8]="looseItemEnd",t[t.listItemStart=9]="listItemStart",t[t.listItemEnd=10]="listItemEnd",t[t.blockquoteStart=11]="blockquoteStart",t[t.blockquoteEnd=12]="blockquoteEnd",t[t.code=13]="code",t[t.table=14]="table",t[t.html=15]="html",t[t.hr=16]="hr"})(k=k||{});class us{constructor(){y(this,"gfm",!0);y(this,"tables",!0);y(this,"breaks",!1);y(this,"pedantic",!1);y(this,"sanitize",!1);y(this,"sanitizer");y(this,"mangle",!0);y(this,"smartLists",!1);y(this,"silent",!1);y(this,"highlight");y(this,"langPrefix","lang-");y(this,"smartypants",!1);y(this,"headerPrefix","");y(this,"renderer");y(this,"xhtml",!1);y(this,"escape",cs);y(this,"unescape",hs);y(this,"isNoP")}}class ir{constructor(e){y(this,"options");this.options=e||ee.options}code(e,r,s,n){this.options.highlight&&(o=this.options.highlight(e,r))!=null&&o!==e&&(s=!0,e=o);var o=s?e:this.options.escape(e,!0);return r?`
<pre><code class="${this.options.langPrefix+this.options.escape(r,!0)}">${o}
</code></pre>
`:`
<pre><code>${o}
</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,r,s){return`<h${r} id="${this.options.headerPrefix+s.toLowerCase().replace(/[^\w]+/g,"-")}">${e}</h${r}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,r){return`
<${r=r?"ol":"ul"}>
${e}</${r}>
`}listitem(e){return"<li>"+e+`</li>
`}paragraph(e){return"<p>"+e+`</p>
`}table(e,r){return`
<table>
<thead>
${e}</thead>
<tbody>
${r}</tbody>
</table>
`}tablerow(e){return`<tr>
`+e+`</tr>
`}tablecell(e,r){var s=r.header?"th":"td";return(r.align?"<"+s+' style="text-align:'+r.align+'">':"<"+s+">")+e+"</"+s+`>
`}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,r,s){if(this.options.sanitize){let o;try{o=decodeURIComponent(this.options.unescape(e)).replace(/[^\w:]/g,"").toLowerCase()}catch{return s}if(o.indexOf("javascript:")===0||o.indexOf("vbscript:")===0||o.indexOf("data:")===0)return s}let n='<a href="'+e+'"';return r&&(n+=' title="'+r+'"'),n+">"+s+"</a>"}image(e,r,s){let n='<img src="'+e+'" alt="'+s+'"';return r&&(n+=' title="'+r+'"'),n+(this.options.xhtml?"/>":">")}text(e){return e}}class oe{constructor(e,r,s=ee.options,n){y(this,"staticThis");y(this,"links");y(this,"options");y(this,"rules");y(this,"renderer");y(this,"inLink");y(this,"hasRulesGfm");y(this,"ruleCallbacks");if(this.staticThis=e,this.links=r,this.options=s,this.renderer=n||this.options.renderer||new ir(this.options),!this.links)throw new Error("InlineLexer requires 'links' parameter.");this.setRules()}static output(e,r,s){return new this(this,r,s).output(e)}static getRulesBase(){var e;return this.rulesBase||((e={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ <>]+(@|:\/)[^ <>]+)>/,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^<'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)([\s\S]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,_inside:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_href:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/}).link=new J(e.link).setGroup("inside",e._inside).setGroup("href",e._href).getRegexp(),e.reflink=new J(e.reflink).setGroup("inside",e._inside).getRegexp(),this.rulesBase=e)}static getRulesPedantic(){return this.rulesPedantic||(this.rulesPedantic={...this.getRulesBase(),strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/})}static getRulesGfm(){var e,r,s;return this.rulesGfm||(e=this.getRulesBase(),r=new J(e.escape).setGroup("])","~|])").getRegexp(),s=new J(e.text).setGroup("]|","~]|").setGroup("|","|https?://|").getRegexp(),this.rulesGfm={...e,escape:r,url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:s})}static getRulesBreaks(){var e,r;return this.rulesBreaks||(e=this.getRulesGfm(),r=this.getRulesGfm(),this.rulesBreaks={...r,br:new J(e.br).setGroup("{2,}","*").getRegexp(),text:new J(r.text).setGroup("{2,}","*").getRegexp()})}setRules(){this.options.gfm?this.options.breaks?this.rules=this.staticThis.getRulesBreaks():this.rules=this.staticThis.getRulesGfm():this.options.pedantic?this.rules=this.staticThis.getRulesPedantic():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=this.rules.url!==void 0}output(e){let r,s="";for(;e;)if(r=this.rules.escape.exec(e))e=e.substring(r[0].length),s+=r[1];else if(r=this.rules.autolink.exec(e)){let a,l;e=e.substring(r[0].length),l=r[2]==="@"?(a=this.options.escape(r[1].charAt(6)===":"?this.mangle(r[1].substring(7)):this.mangle(r[1])),this.mangle("mailto:")+a):a=this.options.escape(r[1]),s+=this.renderer.link(l,null,a)}else if(!this.inLink&&this.hasRulesGfm&&(r=this.rules.url.exec(e))){e=e.substring(r[0].length);var n=this.options.escape(r[1]);s+=this.renderer.link(n,null,n)}else if(r=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),e=e.substring(r[0].length),s+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):this.options.escape(r[0]):r[0];else if(r=this.rules.link.exec(e))e=e.substring(r[0].length),this.inLink=!0,s+=this.outputLink(r,{href:r[2],title:r[3]}),this.inLink=!1;else if(r=(r=this.rules.reflink.exec(e))||this.rules.nolink.exec(e)){e=e.substring(r[0].length),n=(r[2]||r[1]).replace(/\s+/g," ");var o=this.links[n.toLowerCase()];o&&o.href?(this.inLink=!0,s+=this.outputLink(r,o),this.inLink=!1):(s+=r[0].charAt(0),e=r[0].substring(1)+e)}else if(r=this.rules.strong.exec(e))e=e.substring(r[0].length),s+=this.renderer.strong(this.output(r[2]||r[1]));else if(r=this.rules.em.exec(e))e=e.substring(r[0].length),s+=this.renderer.em(this.output(r[2]||r[1]));else if(r=this.rules.code.exec(e))e=e.substring(r[0].length),s+=this.renderer.codespan(this.options.escape(r[2].trim(),!0));else if(r=this.rules.br.exec(e))e=e.substring(r[0].length),s+=this.renderer.br();else if(this.hasRulesGfm&&(r=this.rules.del.exec(e)))e=e.substring(r[0].length),s+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),s+=this.renderer.text(this.options.escape(this.smartypants(r[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return s}outputLink(e,r){var s=this.options.escape(r.href);return r=r.title?this.options.escape(r.title):null,e[0].charAt(0)!=="!"?this.renderer.link(s,r,this.output(e[1])):this.renderer.image(s,r,this.options.escape(e[1]))}smartypants(e){return this.options.smartypants?e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/([{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/([{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e}mangle(e){if(!this.options.mangle)return e;let r="";var s=e.length;for(let n=0;n<s;n++){let o;.5<Math.random()&&(o="x"+e.charCodeAt(n).toString(16)),r+="&#"+o+";"}return r}}y(oe,"rulesBase",null),y(oe,"rulesPedantic",null),y(oe,"rulesGfm",null),y(oe,"rulesBreaks",null);class rt{constructor(e){y(this,"simpleRenderers",[]);y(this,"tokens");y(this,"token");y(this,"inlineLexer");y(this,"options");y(this,"renderer");y(this,"line",0);this.tokens=[],this.token=null,this.options=e||ee.options,this.renderer=this.options.renderer||new ir(this.options)}static parse(e,r,s){return new this(s).parse(r,e)}parse(e,r){this.inlineLexer=new oe(oe,e,this.options,this.renderer),this.tokens=r.reverse();let s="";for(;this.next();)s+=this.tok();return s}debug(e,r){this.inlineLexer=new oe(oe,e,this.options,this.renderer),this.tokens=r.reverse();let s="";for(;this.next();){var n=this.tok();this.token.line=this.line+=n.split(`
`).length-1,s+=n}return s}next(){return this.token=this.tokens.pop()}getNextElement(){return this.tokens[this.tokens.length-1]}parseText(){let e=this.token.text;for(var r;(r=this.getNextElement())&&r.type==k.text;)e+=`
`+this.next().text;return this.inlineLexer.output(e)}tok(){switch(this.token.type){case k.space:return"";case k.paragraph:return this.renderer.paragraph(this.inlineLexer.output(this.token.text));case k.text:return this.options.isNoP?this.parseText():this.renderer.paragraph(this.parseText());case k.heading:return this.renderer.heading(this.inlineLexer.output(this.token.text),this.token.depth,this.token.text);case k.listStart:{let n="";for(var e=this.token.ordered;this.next().type!=k.listEnd;)n+=this.tok();return this.renderer.list(n,e)}case k.listItemStart:{let n="";for(;this.next().type!=k.listItemEnd;)n+=this.token.type==k.text?this.parseText():this.tok();return this.renderer.listitem(n)}case k.looseItemStart:{let n="";for(;this.next().type!=k.listItemEnd;)n+=this.tok();return this.renderer.listitem(n)}case k.code:return this.renderer.code(this.token.text,this.token.lang,this.token.escaped,this.token.meta);case k.table:{e="";let n,o="";n="";for(let a=0;a<this.token.header.length;a++){var r={header:!0,align:this.token.align[a]},s=this.inlineLexer.output(this.token.header[a]);n+=this.renderer.tablecell(s,r)}e+=this.renderer.tablerow(n);for(const a of this.token.cells){n="";for(let l=0;l<a.length;l++)n+=this.renderer.tablecell(this.inlineLexer.output(a[l]),{header:!1,align:this.token.align[l]});o+=this.renderer.tablerow(n)}return this.renderer.table(e,o)}case k.blockquoteStart:{let n="";for(;this.next().type!=k.blockquoteEnd;)n+=this.tok();return this.renderer.blockquote(n)}case k.hr:return this.renderer.hr();case k.html:return e=this.token.pre||this.options.pedantic?this.token.text:this.inlineLexer.output(this.token.text),this.renderer.html(e);default:if(this.simpleRenderers.length){for(let n=0;n<this.simpleRenderers.length;n++)if(this.token.type=="simpleRule"+(n+1))return this.simpleRenderers[n].call(this.renderer,this.token.execArr)}if(e=`Token with "${this.token.type}" type was not found.`,!this.options.silent)throw new Error(e);console.log(e)}}}class ee{static setOptions(e){return Object.assign(this.options,e),this}static setBlockRule(e,r=()=>""){return me.simpleRules.push(e),this.simpleRenderers.push(r),this}static parse(e,r){try{r={...this.options,...r};var{tokens:s,links:n}=this.callBlockLexer(e,r);return this.callParser(s,n,r)}catch(o){return this.callMe(o)}}static debug(s,r=this.options){var{tokens:s,links:n}=this.callBlockLexer(s,r);let o=s.slice();return(r=new rt(r)).simpleRenderers=this.simpleRenderers,r=r.debug(n,s),{tokens:o=o.map(a=>{a.type=k[a.type]||a.type;var l=a.line;return delete a.line,l?{line:l,...a}:a}),links:n,result:r}}static callBlockLexer(e="",r){if(typeof e!="string")throw new Error(`Expected that the 'src' parameter would have a 'string' type, got '${typeof e}'`);return e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,`
`).replace(/^ +$/gm,""),me.lex(e,r,!0)}static callParser(e,r,s){var n;return this.simpleRenderers.length?((n=new rt(s)).simpleRenderers=this.simpleRenderers,n.parse(r,e)):rt.parse(e,r,s)}static callMe(e){if(e.message+=`
Please report this to https://github.com/ts-stack/markdown`,this.options.silent)return"<p>An error occured:</p><pre>"+this.options.escape(e.message+"",!0)+"</pre>";throw e}}y(ee,"options",new us),y(ee,"simpleRenderers",[]);class me{constructor(e,r){y(this,"staticThis");y(this,"rules");y(this,"options");y(this,"links",{});y(this,"tokens",[]);y(this,"hasRulesGfm");y(this,"hasRulesTables");this.staticThis=e,this.options=r||ee.options,this.setRules()}static lex(e,r,s,n){return new this(this,r).getTokens(e,s,n)}static getRulesBase(){var e,r;return this.rulesBase||((e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/}).item=new J(e.item,"gm").setGroup(/bull/g,e.bullet).getRegexp(),e.list=new J(e.list).setGroup(/bull/g,e.bullet).setGroup("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))").setGroup("def","\\n+(?="+e.def.source+")").getRegexp(),r="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",e.html=new J(e.html).setGroup("comment",/<!--[\s\S]*?-->/).setGroup("closed",/<(tag)[\s\S]+?<\/\1>/).setGroup("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/).setGroup(/tag/g,r).getRegexp(),e.paragraph=new J(e.paragraph).setGroup("hr",e.hr).setGroup("heading",e.heading).setGroup("lheading",e.lheading).setGroup("blockquote",e.blockquote).setGroup("tag","<"+r).setGroup("def",e.def).getRegexp(),this.rulesBase=e)}static getRulesGfm(){var e,r,s,n;return this.rulesGfm||(s=(r={...e=this.getRulesBase(),fences:/^ *(`{3,}|~{3,})[ \.]*((\S+)? *[^\n]*)\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}).fences.source.replace("\\1","\\2"),n=e.list.source.replace("\\1","\\3"),r.paragraph=new J(e.paragraph).setGroup("(?!",`(?!${s}|${n}|`).getRegexp(),this.rulesGfm=r)}static getRulesTable(){return this.rulesTables||(this.rulesTables={...this.getRulesGfm(),nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/})}setRules(){this.options.gfm?this.options.tables?this.rules=this.staticThis.getRulesTable():this.rules=this.staticThis.getRulesGfm():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=this.rules.fences!==void 0,this.hasRulesTables=this.rules.table!==void 0}getTokens(e,r,s){let n,o=e;e:for(;o;)if((n=this.rules.newline.exec(o))&&(o=o.substring(n[0].length),1<n[0].length)&&this.tokens.push({type:k.space}),n=this.rules.code.exec(o)){o=o.substring(n[0].length);var a=n[0].replace(/^ {4}/gm,"");this.tokens.push({type:k.code,text:this.options.pedantic?a:a.replace(/\n+$/,"")})}else if(this.hasRulesGfm&&(n=this.rules.fences.exec(o)))o=o.substring(n[0].length),this.tokens.push({type:k.code,meta:n[2],lang:n[3],text:n[4]||""});else if(n=this.rules.heading.exec(o))o=o.substring(n[0].length),this.tokens.push({type:k.heading,depth:n[1].length,text:n[2]});else if(r&&this.hasRulesTables&&(n=this.rules.nptable.exec(o))){o=o.substring(n[0].length);var l={type:k.table,header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let b=0;b<l.align.length;b++)/^ *-+: *$/.test(l.align[b])?l.align[b]="right":/^ *:-+: *$/.test(l.align[b])?l.align[b]="center":/^ *:-+ *$/.test(l.align[b])?l.align[b]="left":l.align[b]=null;var i=n[3].replace(/\n$/,"").split(`
`);for(let b=0;b<i.length;b++)l.cells[b]=i[b].split(/ *\| */);this.tokens.push(l)}else if(n=this.rules.lheading.exec(o))o=o.substring(n[0].length),this.tokens.push({type:k.heading,depth:n[2]==="="?1:2,text:n[1]});else if(n=this.rules.hr.exec(o))o=o.substring(n[0].length),this.tokens.push({type:k.hr});else if(n=this.rules.blockquote.exec(o))o=o.substring(n[0].length),this.tokens.push({type:k.blockquoteStart}),a=n[0].replace(/^ *> ?/gm,""),this.getTokens(a),this.tokens.push({type:k.blockquoteEnd});else if(n=this.rules.list.exec(o)){o=o.substring(n[0].length);var c,u=n[2],p=(this.tokens.push({type:k.listStart,ordered:1<u.length}),n[0].match(this.rules.item)),h=p.length;let b,$=!1;for(let x=0;x<h;x++){let B=p[x];c=B.length,(B=B.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf(`
 `)!==-1&&(c-=B.length,B=this.options.pedantic?B.replace(/^ {1,4}/gm,""):B.replace(new RegExp("^ {1,"+c+"}","gm"),"")),!this.options.smartLists||x===h-1||u===(c=this.staticThis.getRulesBase().bullet.exec(p[x+1])[0])||1<u.length&&1<c.length||(o=p.slice(x+1).join(`
`)+o,x=h-1),b=$||/\n\n(?!\s*$)/.test(B),x!==h-1&&($=B.charAt(B.length-1)===`
`,b=b||$),this.tokens.push({type:b?k.looseItemStart:k.listItemStart}),this.getTokens(B,!1,s),this.tokens.push({type:k.listItemEnd})}this.tokens.push({type:k.listEnd})}else if(n=this.rules.html.exec(o)){o=o.substring(n[0].length);var f=n[1];this.tokens.push({type:this.options.sanitize?k.paragraph:k.html,pre:!this.options.sanitizer&&(f==="pre"||f==="script"||f==="style"),text:n[0]})}else if(r&&(n=this.rules.def.exec(o)))o=o.substring(n[0].length),this.links[n[1].toLowerCase()]={href:n[2],title:n[3]};else if(r&&this.hasRulesTables&&(n=this.rules.table.exec(o))){o=o.substring(n[0].length);var d={type:k.table,header:n[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let b=0;b<d.align.length;b++)/^ *-+: *$/.test(d.align[b])?d.align[b]="right":/^ *:-+: *$/.test(d.align[b])?d.align[b]="center":/^ *:-+ *$/.test(d.align[b])?d.align[b]="left":d.align[b]=null;var m=n[3].replace(/(?: *\| *)?\n$/,"").split(`
`);for(let b=0;b<m.length;b++)d.cells[b]=m[b].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(d)}else{if(this.staticThis.simpleRules.length){var R=this.staticThis.simpleRules;for(let b=0;b<R.length;b++)if(n=R[b].exec(o)){o=o.substring(n[0].length);var v="simpleRule"+(b+1);this.tokens.push({type:v,execArr:n});continue e}}if(r&&(n=this.rules.paragraph.exec(o)))o=o.substring(n[0].length),n[1].slice(-1)===`
`?this.tokens.push({type:k.paragraph,text:n[1].slice(0,-1)}):this.tokens.push({type:0<this.tokens.length?k.paragraph:k.text,text:n[1]});else if(n=this.rules.text.exec(o))o=o.substring(n[0].length),this.tokens.push({type:k.text,text:n[0]});else if(o)throw new Error("Infinite loop on byte: "+o.charCodeAt(0)+`, near text '${o.slice(0,30)}...'`)}return{tokens:this.tokens,links:this.links}}}y(me,"simpleRules",[]),y(me,"rulesBase",null),y(me,"rulesGfm",null),y(me,"rulesTables",null);const ps=T('<div class="flex justify-end mb-2 items-end guest-container"><span class="px-4 py-2 mr-2 whitespace-pre-wrap max-w-full chatbot-guest-bubble" data-testid="guest-bubble">'),ds=(ee.setOptions({isNoP:!0}),t=>{let e;de(()=>{e&&(e.innerHTML=ee.parse(t.message))});{const r=ps(),s=r.firstChild;return r.style.setProperty("margin-left","50px"),typeof e=="function"?ie(e,s):e=s,s.style.setProperty("border-radius","6px"),O(r,C(G,{get when(){return t.showAvatar},get children(){return C(xt,{get initialAvatarSrc(){return t.avatarSrc}})}}),null),M(n=>{var o=t.backgroundColor??"#3B81F6",a=t.textColor??"#ffffff";return o!==n._v$&&((n._v$=o)!=null?s.style.setProperty("background-color",o):s.style.removeProperty("background-color")),a!==n._v$2&&((n._v$2=a)!=null?s.style.setProperty("color",a):s.style.removeProperty("color")),n},{_v$:void 0,_v$2:void 0}),r}}),fs=T('<div class="flex justify-start mb-2 items-start host-container"><span class="px-4 py-2 ml-2 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),gs=(ee.setOptions({isNoP:!0}),t=>{let e;de(()=>{if(e&&(e.innerHTML=ee.parse(t.message),t.fileAnnotations)&&t.fileAnnotations.length)for(const n of t.fileAnnotations){var r=document.createElement("button"),s=(r.textContent=n.fileName,r.className="py-2 px-4 mb-2 justify-center font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 file-annotation-button",r.addEventListener("click",function(){(async o=>{try{var a=await Fr({apiHost:t.apiHost,body:{question:"",history:[],fileName:o.fileName}}),l=new Blob([a.data]),i=window.URL.createObjectURL(l),c=document.createElement("a");c.href=i,c.download=o.fileName,document.body.appendChild(c),c.click(),c.remove()}catch(u){console.error("Download failed:",u)}})(n)}),document.createElement("div"));s.className="ml-2",s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-download" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>',r.appendChild(s),e.appendChild(r)}});{const r=fs(),s=r.firstChild;return r.style.setProperty("margin-right","50px"),O(r,C(G,{get when(){return t.showAvatar},get children(){return C(xt,{get initialAvatarSrc(){return t.avatarSrc}})}}),s),typeof e=="function"?ie(e,s):e=s,s.style.setProperty("border-radius","6px"),M(n=>{var o=t.backgroundColor??"#f7f8ff",a=t.textColor??"#303235";return o!==n._v$&&((n._v$=o)!=null?s.style.setProperty("background-color",o):s.style.removeProperty("background-color")),a!==n._v$2&&((n._v$2=a)!=null?s.style.setProperty("color",a):s.style.removeProperty("color")),n},{_v$:void 0,_v$2:void 0}),r}}),bs=T('<div class="flex items-center"><div class="w-2 h-2 mr-1 rounded-full bubble1"></div><div class="w-2 h-2 mr-1 rounded-full bubble2"></div><div class="w-2 h-2 rounded-full bubble3">'),ys=()=>bs(),ms=T('<div class="flex justify-start mb-2 items-start animate-fade-in host-container"><span class="px-4 py-4 ml-2 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),ws=()=>{return O((t=ms()).firstChild,C(ys,{})),t;var t},vs=T('<div data-modal-target="defaultModal" data-modal-toggle="defaultModal" class="flex justify-start mb-2 items-start animate-fade-in host-container hover:brightness-90 active:brightness-75"><span class="px-2 py-1 ml-1 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),xs=t=>{return r=(e=vs()).firstChild,e.$$click=()=>{var s;return(s=t.onSourceClick)==null?void 0:s.call(t)},r.style.setProperty("width","max-content"),r.style.setProperty("max-width","80px"),r.style.setProperty("font-size","13px"),r.style.setProperty("border-radius","15px"),r.style.setProperty("cursor","pointer"),r.style.setProperty("text-overflow","ellipsis"),r.style.setProperty("overflow","hidden"),r.style.setProperty("white-space","nowrap"),O(r,()=>t.pageContent),e;var e,r},ks=(xe(["click"]),T('<div data-modal-target="defaultModal" data-modal-toggle="defaultModal" class="flex justify-start mb-2 items-start animate-fade-in host-container hover:brightness-90 active:brightness-75"><span class="px-2 py-1 ml-1 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">')),_s=t=>{return r=(e=ks()).firstChild,e.$$click=()=>{var s;return(s=t.onPromptClick)==null?void 0:s.call(t)},r.style.setProperty("width","max-content"),r.style.setProperty("font-size","15px"),r.style.setProperty("border-radius","15px"),r.style.setProperty("cursor","pointer"),O(r,()=>t.prompt),e;var e,r},Cs=(xe(["click"]),T('<span>Powered by<a href="https://flowiseai.com" target="_blank" rel="noopener noreferrer" class="lite-badge" id="lite-badge"><span> Flowise')),Mt="#303235",Ss=t=>{let e,r;const s=n=>{n.forEach(o=>{o.removedNodes.forEach(a=>{var l;"id"in a&&e&&a.id=="lite-badge"&&(console.log("Sorry, you can't remove the brand "),(l=t.botContainer)==null||l.append(e))})})};de(()=>{document&&t.botContainer&&(r=new MutationObserver(s)).observe(t.botContainer,{subtree:!1,childList:!0})}),mt(()=>{r&&r.disconnect()});{const n=Cs(),o=n.firstChild.nextSibling;return n.style.setProperty("font-size","13px"),n.style.setProperty("position","absolute"),n.style.setProperty("bottom","0"),n.style.setProperty("padding","10px"),n.style.setProperty("margin","auto"),n.style.setProperty("width","100%"),n.style.setProperty("text-align","center"),typeof e=="function"?ie(e,o):e=o,o.style.setProperty("font-weight","bold"),M(a=>{var l=t.poweredByTextColor??Mt,i=t.badgeBackgroundColor??"#ffffff",c=t.poweredByTextColor??Mt;return l!==a._v$&&((a._v$=l)!=null?n.style.setProperty("color",l):n.style.removeProperty("color")),i!==a._v$2&&((a._v$2=i)!=null?n.style.setProperty("background-color",i):n.style.removeProperty("background-color")),c!==a._v$3&&((a._v$3=c)!=null?o.style.setProperty("color",c):o.style.removeProperty("color")),a},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n}},Q=Object.create(null),Me=(Q.open="0",Q.close="1",Q.ping="2",Q.pong="3",Q.message="4",Q.upgrade="5",Q.noop="6",Object.create(null)),ct=(Object.keys(Q).forEach(t=>{Me[Q[t]]=t}),{type:"error",data:"parser error"}),ar=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",lr=typeof ArrayBuffer=="function",cr=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,ht=({type:t,data:e},r,s)=>ar&&e instanceof Blob?r?s(e):zt(e,s):lr&&(e instanceof ArrayBuffer||cr(e))?r?s(e):zt(new Blob([e]),s):s(Q[t]+(e||"")),zt=(t,e)=>{const r=new FileReader;return r.onload=function(){var s=r.result.split(",")[1];e("b"+(s||""))},r.readAsDataURL(t)};function qt(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let st;const Ps="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<64;t++)_e[Ps.charCodeAt(t)]=t;const As=typeof ArrayBuffer=="function",ut=(t,e)=>{var r;return typeof t!="string"?{type:"message",data:hr(t,e)}:(r=t.charAt(0))==="b"?{type:"message",data:Es(t.substring(1),e)}:Me[r]?1<t.length?{type:Me[r],data:t.substring(1)}:{type:Me[r]}:ct},Es=(t,e)=>{var r;return As?(r=(s=>{let n,o,a,l,i,c=.75*s.length,u=s.length,p=0;s[s.length-1]==="="&&(c--,s[s.length-2]==="=")&&c--;var h=new ArrayBuffer(c),f=new Uint8Array(h);for(n=0;n<u;n+=4)o=_e[s.charCodeAt(n)],a=_e[s.charCodeAt(n+1)],l=_e[s.charCodeAt(n+2)],i=_e[s.charCodeAt(n+3)],f[p++]=o<<2|a>>4,f[p++]=(15&a)<<4|l>>2,f[p++]=(3&l)<<6|63&i;return h})(t),hr(r,e)):{base64:!0,data:t}},hr=(t,e)=>e!=="blob"?t instanceof ArrayBuffer?t:t.buffer:t instanceof Blob?t:new Blob([t]),Dt=String.fromCharCode(30);function $s(){return new TransformStream({transform(t,e){(function(r,s){ar&&r.data instanceof Blob?r.data.arrayBuffer().then(qt).then(s):lr&&(r.data instanceof ArrayBuffer||cr(r.data))?s(qt(r.data)):ht(r,!1,n=>{st=st||new TextEncoder,s(st.encode(n))})})(t,r=>{var s,n=r.length;let o;n<126?(o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,n)):n<65536?(o=new Uint8Array(3),(s=new DataView(o.buffer)).setUint8(0,126),s.setUint16(1,n)):(o=new Uint8Array(9),(s=new DataView(o.buffer)).setUint8(0,127),s.setBigUint64(1,BigInt(n))),t.data&&typeof t.data!="string"&&(o[0]|=128),e.enqueue(o),e.enqueue(r)})}})}let nt;function Re(t){return t.reduce((e,r)=>e+r.length,0)}function Oe(t,e){if(t[0].length===e)return t.shift();var r=new Uint8Array(e);let s=0;for(let n=0;n<e;n++)r[n]=t[0][s++],s===t[0].length&&(t.shift(),s=0);return t.length&&s<t[0].length&&(t[0]=t[0].slice(s)),r}function j(t){if(t)return function(e){for(var r in j.prototype)e[r]=j.prototype[r];return e}(t)}j.prototype.on=j.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},j.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},j.prototype.off=j.prototype.removeListener=j.prototype.removeAllListeners=j.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)this._callbacks={};else{var r=this._callbacks["$"+t];if(r)if(arguments.length==1)delete this._callbacks["$"+t];else{for(var s,n=0;n<r.length;n++)if((s=r[n])===e||s.fn===e){r.splice(n,1);break}r.length===0&&delete this._callbacks["$"+t]}}return this},j.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(r){s=0;for(var n=(r=r.slice(0)).length;s<n;++s)r[s].apply(this,e)}return this},j.prototype.emitReserved=j.prototype.emit,j.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},j.prototype.hasListeners=function(t){return!!this.listeners(t).length};const W=typeof self<"u"?self:typeof window<"u"?window:Function("return this")();function ur(t,...e){return e.reduce((r,s)=>(t.hasOwnProperty(s)&&(r[s]=t[s]),r),{})}const Ts=W.setTimeout,Rs=W.clearTimeout;function Xe(t,e){e.useNativeTimers?(t.setTimeoutFn=Ts.bind(W),t.clearTimeoutFn=Rs.bind(W)):(t.setTimeoutFn=W.setTimeout.bind(W),t.clearTimeoutFn=W.clearTimeout.bind(W))}function Os(t){return typeof t=="string"?function(e){let r,s=0;for(let n=0,o=e.length;n<o;n++)(r=e.charCodeAt(n))<128?s+=1:r<2048?s+=2:r<55296||57344<=r?s+=3:(n++,s+=4);return s}(t):Math.ceil(1.33*(t.byteLength||t.size))}class Bs extends Error{constructor(e,r,s){super(e),this.description=r,this.context=s,this.type="TransportError"}}class ot extends j{constructor(e){super(),this.writable=!1,Xe(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,r,s){return super.emitReserved("error",new Bs(e,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){e=ut(e,this.socket.binaryType),this.onPacket(e)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,r={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){var e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){return e=function(r){let s="";for(var n in r)r.hasOwnProperty(n)&&(s.length&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(r[n]));return s}(e),e.length?"?"+e:""}}const pr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),pt=64,Ls={};let Ut,Ft=0,Be=0;function Ht(t){let e="";for(;e=pr[t%pt]+e,0<(t=Math.floor(t/pt)););return e}function Gt(){var t=Ht(+new Date);return t!==Ut?(Ft=0,Ut=t):t+"."+Ht(Ft++)}for(;Be<pt;Be++)Ls[pr[Be]]=Be;let dr=!1;try{dr=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ns=dr;function fr(t){t=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Ns))return new XMLHttpRequest}catch{}if(!t)try{return new W[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function js(){}const Is=new fr({xdomain:!1}).responseType!=null;class Z extends j{constructor(e,r){super(),Xe(this,r),this.opts=r,this.method=r.method||"GET",this.uri=e,this.data=r.data!==void 0?r.data:null,this.create()}create(){var e,r=ur(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;const s=this.xhr=new fr(r);try{s.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders)for(var n in s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&s.setRequestHeader(n,this.opts.extraHeaders[n])}catch{}if(this.method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)!=null&&e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(s.timeout=this.opts.requestTimeout),s.onreadystatechange=()=>{var o;s.readyState===3&&(o=this.opts.cookieJar)!=null&&o.parseCookies(s),s.readyState===4&&(s.status===200||s.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof s.status=="number"?s.status:0)},0))},s.send(this.data)}catch(o){return void this.setTimeoutFn(()=>{this.onError(o)},0)}typeof document<"u"&&(this.index=Z.requestsCount++,Z.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(this.xhr!==void 0&&this.xhr!==null){if(this.xhr.onreadystatechange=js,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Z.requests[this.index],this.xhr=null}}onLoad(){var e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Z.requestsCount=0,Z.requests={},typeof document<"u"&&(typeof attachEvent=="function"?attachEvent("onunload",Wt):typeof addEventListener=="function"&&addEventListener("onpagehide"in W?"pagehide":"unload",Wt,!1));function Wt(){for(var t in Z.requests)Z.requests.hasOwnProperty(t)&&Z.requests[t].abort()}const dt=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0),Le=W.WebSocket||W.MozWebSocket,Vt=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",Ms={websocket:class extends ot{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(this.check()){var t=this.uri(),e=this.opts.protocols,r=Vt?{}:ur(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=Vt?new Le(t,e,r):e?new Le(t,e):new Le(t)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){var e=t[r];const s=r===t.length-1;ht(e,this.supportsBinary,n=>{try{this.ws.send(n)}catch{}s&&dt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){this.ws!==void 0&&(this.ws.close(),this.ws=null)}uri(){var t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=Gt()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}check(){return!!Le}},webtransport:class extends ot{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{var e=function(n,o){nt=nt||new TextDecoder;const a=[];let l=0,i=-1,c=!1;return new TransformStream({transform(u,p){for(a.push(u);;){if(l===0){if(Re(a)<1)break;var h=Oe(a,1);c=(128&h[0])==128,i=127&h[0],l=i<126?3:i===126?1:2}else if(l===1){if(Re(a)<2)break;h=Oe(a,2),i=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),l=3}else if(l===2){if(Re(a)<8)break;var f=Oe(a,8),d=(f=new DataView(f.buffer,f.byteOffset,f.length)).getUint32(0);if(d>Math.pow(2,21)-1){p.enqueue(ct);break}i=d*Math.pow(2,32)+f.getUint32(4),l=3}else{if(Re(a)<i)break;d=Oe(a,i),p.enqueue(ut(c?d:nt.decode(d),o)),l=0}if(i===0||i>n){p.enqueue(ct);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType);const r=t.readable.pipeThrough(e).getReader();(e=$s()).readable.pipeTo(t.writable),this.writer=e.writable.getWriter();const s=()=>{r.read().then(({done:n,value:o})=>{n||(this.onPacket(o),s())}).catch(n=>{})};s(),t={type:"open"},this.query.sid&&(t.data=`{"sid":"${this.query.sid}"}`),this.writer.write(t).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let r=0;r<t.length;r++){var e=t[r];const s=r===t.length-1;this.writer.write(e).then(()=>{s&&dt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)!=null&&t.close()}},polling:class extends ot{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){var e=location.protocol==="https:";let r=location.port;r=r||(e?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}e=t&&t.forceBase64,this.supportsBinary=Is&&!e,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||e()})),this.writable||(r++,this.once("drain",function(){--r||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((e,r)=>{var s=e.split(Dt),n=[];for(let a=0;a<s.length;a++){var o=ut(s[a],r);if(n.push(o),o.type==="error")break}return n})(t,this.socket.binaryType).forEach(e=>{if(this.readyState==="opening"&&e.type==="open"&&this.onOpen(),e.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open")&&this.poll()}doClose(){var t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,((e,r)=>{const s=e.length,n=new Array(s);let o=0;e.forEach((a,l)=>{ht(a,!1,i=>{n[l]=i,++o===s&&r(n.join(Dt))})})})(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){var t=this.opts.secure?"https":"http",e=this.query||{};return this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=Gt()),this.supportsBinary||e.sid||(e.b64=1),this.createUri(t,e)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Z(this.uri(),t)}doWrite(t,e){(t=this.request({method:"POST",data:t})).on("success",e),t.on("error",(r,s)=>{this.onError("xhr post error",r,s)})}doPoll(){var t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(e,r)=>{this.onError("xhr poll error",e,r)}),this.pollXhr=t}}},zs=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,qs=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ft(t){var e=t,r=t.indexOf("["),s=t.indexOf("]");r!=-1&&s!=-1&&(t=t.substring(0,r)+t.substring(r,s).replace(/:/g,";")+t.substring(s,t.length));let n=zs.exec(t||""),o={},a=14;for(;a--;)o[qs[a]]=n[a]||"";return r!=-1&&s!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(l,i){var c=i.replace(/\/{2,9}/g,"/").split("/");return i.slice(0,1)!="/"&&i.length!==0||c.splice(0,1),i.slice(-1)=="/"&&c.splice(c.length-1,1),c}(0,o.path),o.queryKey=function(l,i){const c={};return i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(u,p,h){p&&(c[p]=h)}),c}(0,o.query),o}let gr=class be extends j{constructor(e,r={}){super(),this.binaryType="arraybuffer",this.writeBuffer=[],e&&typeof e=="object"&&(r=e,e=null),e?(e=ft(e),r.hostname=e.host,r.secure=e.protocol==="https"||e.protocol==="wss",r.port=e.port,e.query&&(r.query=e.query)):r.host&&(r.hostname=ft(r.host).host),Xe(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=function(s){var n={},o=s.split("&");for(let l=0,i=o.length;l<i;l++){var a=o[l].split("=");n[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return n}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost")&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1)),this.open()}createTransport(e){var r=((r=Object.assign({},this.opts.query)).EIO=4,r.transport=e,this.id&&(r.sid=this.id),Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]));return new Ms[e](r)}open(){let e;if(this.opts.rememberUpgrade&&be.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else{if(this.transports.length===0)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch{return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),(this.transport=e).on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(e){let r=this.createTransport(e),s=!1;be.priorWebsocketSuccess=!1;const n=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",p=>{s||(p.type==="pong"&&p.data==="probe"?(this.upgrading=!0,this.emitReserved("upgrading",r),r&&(be.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())}))):((p=new Error("probe error")).transport=r.name,this.emitReserved("upgradeError",p)))}))};function o(){s||(s=!0,u(),r.close(),r=null)}const a=p=>{(p=new Error("probe error: "+p)).transport=r.name,o(),this.emitReserved("upgradeError",p)};function l(){a("transport closed")}function i(){a("socket closed")}function c(p){r&&p.name!==r.name&&o()}const u=()=>{r.removeListener("open",n),r.removeListener("error",a),r.removeListener("close",l),this.off("close",i),this.off("upgrading",c)};r.once("open",n),r.once("error",a),r.once("close",l),this.once("close",i),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onOpen(){if(this.readyState="open",be.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let r=0;for(var e=this.upgrades.length;r<e;r++)this.probe(this.upgrades[r])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var r=new Error("server error");r.code=e.data,this.onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){var e;this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(e=this.getWritablePackets(),this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush"))}getWritablePackets(){if(this.maxPayload&&this.transport.name==="polling"&&1<this.writeBuffer.length){let r=1;for(let s=0;s<this.writeBuffer.length;s++){var e=this.writeBuffer[s].data;if(e&&(r+=Os(e)),0<s&&r>this.maxPayload)return this.writeBuffer.slice(0,s);r+=2}}return this.writeBuffer}write(e,r,s){return this.sendPacket("message",e,r,s),this}send(e,r,s){return this.sendPacket("message",e,r,s),this}sendPacket(e,r,s,n){typeof r=="function"&&(n=r,r=void 0),typeof s=="function"&&(n=s,s=null),this.readyState!=="closing"&&this.readyState!=="closed"&&((s=s||{}).compress=s.compress!==!1,this.emitReserved("packetCreate",e={type:e,data:r,options:s}),this.writeBuffer.push(e),n&&this.once("flush",n),this.flush())}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return this.readyState!=="opening"&&this.readyState!=="open"||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{(this.upgrading?s:e)()}):(this.upgrading?s:e)()),this}onError(e){be.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,r){this.readyState!=="opening"&&this.readyState!=="open"&&this.readyState!=="closing"||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){var r=[];let s=0;for(var n=e.length;s<n;s++)~this.transports.indexOf(e[s])&&r.push(e[s]);return r}};gr.protocol=4;const Ds=typeof ArrayBuffer=="function",Us=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,br=Object.prototype.toString,Fs=typeof Blob=="function"||typeof Blob<"u"&&br.call(Blob)==="[object BlobConstructor]",Hs=typeof File=="function"||typeof File<"u"&&br.call(File)==="[object FileConstructor]";function kt(t){return Ds&&(t instanceof ArrayBuffer||Us(t))||Fs&&t instanceof Blob||Hs&&t instanceof File}function ze(t,e){if(t&&typeof t=="object")if(Array.isArray(t)){for(let r=0,s=t.length;r<s;r++)if(ze(t[r]))return!0}else{if(kt(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return ze(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&ze(t[r]))return!0}return!1}function Gs(t){var e=[],r=t.data;return t.data=gt(r,e),t.attachments=e.length,{packet:t,buffers:e}}function gt(t,e){if(!t)return t;var r;if(kt(t))return r={_placeholder:!0,num:e.length},e.push(t),r;if(Array.isArray(t)){var s=new Array(t.length);for(let o=0;o<t.length;o++)s[o]=gt(t[o],e);return s}if(typeof t!="object"||t instanceof Date)return t;var n={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=gt(t[o],e));return n}function Ws(t,e){return t.data=bt(t.data,e),delete t.attachments,t}function bt(t,e){if(t){if(t&&t._placeholder===!0){if(typeof t.num=="number"&&0<=t.num&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=bt(t[r],e);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=bt(t[r],e))}return t}const Vs=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(P=P||{});function Yt(t){return Object.prototype.toString.call(t)==="[object Object]"}class _t extends j{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var s=(r=this.decodeString(e)).type===P.BINARY_EVENT;(!s&&r.type!==P.BINARY_ACK||(r.type=s?P.EVENT:P.ACK,this.reconstructor=new Ys(r),r.attachments===0))&&super.emitReserved("decoded",r)}else{if(!kt(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(r=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",r))}}decodeString(e){let r=0;var s={type:Number(e.charAt(0))};if(P[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===P.BINARY_EVENT||s.type===P.BINARY_ACK){for(var n=r+1;e.charAt(++r)!=="-"&&r!=e.length;);if((n=e.substring(n,r))!=Number(n)||e.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(n)}if(e.charAt(r+1)==="/"){for(n=r+1;++r&&e.charAt(r)!==","&&r!==e.length;);s.nsp=e.substring(n,r)}else s.nsp="/";if((n=e.charAt(r+1))!==""&&Number(n)==n){for(n=r+1;++r;){var o=e.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===e.length)break}s.id=Number(e.substring(n,r+1))}if(e.charAt(++r)){if(n=this.tryParse(e.substr(r)),!_t.isPayloadValid(s.type,n))throw new Error("invalid payload");s.data=n}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case P.CONNECT:return Yt(r);case P.DISCONNECT:return r===void 0;case P.CONNECT_ERROR:return typeof r=="string"||Yt(r);case P.EVENT:case P.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Vs.indexOf(r[0])===-1);case P.ACK:case P.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ys{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){return this.buffers.push(e),this.buffers.length===this.reconPack.attachments?(e=Ws(this.reconPack,this.buffers),this.finishedReconstruction(),e):null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var Xs=Object.freeze({__proto__:null,Decoder:_t,Encoder:class{constructor(t){this.replacer=t}encode(t){return t.type!==P.EVENT&&t.type!==P.ACK||!ze(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===P.EVENT?P.BINARY_EVENT:P.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}encodeAsString(t){let e=""+t.type;return t.type!==P.BINARY_EVENT&&t.type!==P.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){t=Gs(t);var e=this.encodeAsString(t.packet);return(t=t.buffers).unshift(e),t}},get PacketType(){return P},protocol:5});function X(t,e,r){return t.on(e,r),function(){t.off(e,r)}}const Js=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class yr extends j{constructor(e,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){var e;this.subs||(e=this.io,this.subs=[X(e,"open",this.onopen.bind(this)),X(e,"packet",this.onpacket.bind(this)),X(e,"error",this.onerror.bind(this)),X(e,"close",this.onclose.bind(this))])}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){if(Js.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');var s,n;return r.unshift(e),!this._opts.retries||this.flags.fromQueue||this.flags.volatile?((e={type:P.EVENT,data:r,options:{}}).options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"&&(s=this.ids++,n=r.pop(),this._registerAckCallback(s,n),e.id=s),n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,(!this.flags.volatile||n&&this.connected)&&(this.connected?(this.notifyOutgoingListeners(e),this.packet(e)):this.sendBuffer.push(e)),this.flags={}):this._addToQueue(r),this}_registerAckCallback(e,r){var s=(s=this.flags.timeout)!=null?s:this._opts.ackTimeout;if(s===void 0)this.acks[e]=r;else{const n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);r.call(this,new Error("operation has timed out"))},s);this.acks[e]=(...o)=>{this.io.clearTimeoutFn(n),r.apply(this,[null,...o])}}}emitWithAck(e,...r){const s=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((n,o)=>{r.push((a,l)=>s?a?o(a):n(l):n(a)),this.emit(e,...r)})}_addToQueue(e){let r;typeof e[e.length-1]=="function"&&(r=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...o)=>{if(s===this._queue[0])return n!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r)&&r(n):(this._queue.shift(),r&&r(null,...o)),s.pending=!1,this._drainQueue()}),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){var r;!this.connected||this._queue.length===0||(r=this._queue[0]).pending&&!e||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:P.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case P.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case P.EVENT:case P.BINARY_EVENT:this.onevent(e);break;case P.ACK:case P.BINARY_ACK:this.onack(e);break;case P.DISCONNECT:this.ondisconnect();break;case P.CONNECT_ERROR:this.destroy();var r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r)}}onevent(e){var r=e.data||[];e.id!=null&&r.push(this.ack(e.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length)for(const r of this._anyListeners.slice())r.apply(this,e);super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const r=this;let s=!1;return function(...n){s||(s=!0,r.packet({type:P.ACK,id:e,data:n}))}}onack(e){var r=this.acks[e.id];typeof r=="function"&&(r.apply(this,e.data),delete this.acks[e.id])}onconnect(e,r){this.id=e,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:P.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(this._anyListeners)if(e){var r=this._anyListeners;for(let s=0;s<r.length;s++)if(e===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(this._anyOutgoingListeners)if(e){var r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(e===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(const r of this._anyOutgoingListeners.slice())r.apply(this,e.data)}}function ye(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=0<t.jitter&&t.jitter<=1?t.jitter:0,this.attempts=0}ye.prototype.duration=function(){var t,e,r=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(t=Math.random(),e=Math.floor(t*this.jitter*r),r=1&Math.floor(10*t)?r+e:r-e),0|Math.min(r,this.max)},ye.prototype.reset=function(){this.attempts=0},ye.prototype.setMin=function(t){this.ms=t},ye.prototype.setMax=function(t){this.max=t},ye.prototype.setJitter=function(t){this.jitter=t};class yt extends j{constructor(e,r){super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),(r=r||{}).path=r.path||"/socket.io",this.opts=r,Xe(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!=null?s:.5),this.backoff=new ye({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;var s=r.parser||Xs;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)!=null&&r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)!=null&&r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)!=null&&r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(!~this._readyState.indexOf("open")){this.engine=new gr(this.uri,this.opts);const n=this.engine,o=this,a=(this._readyState="opening",this.skipReconnect=!1,X(n,"open",function(){o.onopen(),e&&e()})),l=i=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",i),e?e(i):this.maybeReconnectOnOpen()};var r=X(n,"error",l);if(this._timeout!==!1){var s=this._timeout;const i=this.setTimeoutFn(()=>{a(),l(new Error("timeout")),n.close()},s);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}this.subs.push(a),this.subs.push(r)}return this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(X(e,"ping",this.onping.bind(this)),X(e,"data",this.ondata.bind(this)),X(e,"error",this.onerror.bind(this)),X(e,"close",this.onclose.bind(this)),X(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(r){this.onclose("parse error",r)}}ondecoded(e){dt(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,r){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new yr(this,e,r),this.nsps[e]=s),s}_destroy(e){for(const r of Object.keys(this.nsps))if(this.nsps[r].active)return;this._close()}_packet(e){var r=this.encoder.encode(e);for(let s=0;s<r.length;s++)this.engine.write(r[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect)||e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()})},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const ke={};function qe(t,e){typeof t=="object"&&(e=t,t=void 0),t=function(a,l="",i){let c=a;return i=i||typeof location<"u"&&location,typeof(a=a??i.protocol+"//"+i.host)=="string"&&(a.charAt(0)==="/"&&(a=a.charAt(1)==="/"?i.protocol+a:i.host+a),/^(https?|wss?):\/\//.test(a)||(a=i!==void 0?i.protocol+"//"+a:"https://"+a),c=ft(a)),c.port||(/^(http|ws)$/.test(c.protocol)?c.port="80":/^(http|ws)s$/.test(c.protocol)&&(c.port="443")),c.path=c.path||"/",a=c.host.indexOf(":")!==-1?"["+c.host+"]":c.host,c.id=c.protocol+"://"+a+":"+c.port+l,c.href=c.protocol+"://"+a+(i&&i.port===c.port?"":":"+c.port),c}(t,(e=e||{}).path||"/socket.io");var r=t.source,s=t.id,n=t.path;n=ke[s]&&n in ke[s].nsps;let o;return o=(n=e.forceNew||e["force new connection"]||e.multiplex===!1||n)?new yt(r,e):(ke[s]||(ke[s]=new yt(r,e)),ke[s]),t.query&&!e.query&&(e.query=t.queryKey),o.socket(t.path,e)}Object.assign(qe,{Manager:yt,Socket:yr,io:qe,connect:qe});const Ks=T("<style>"),Qs=T('<div class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true"><style></style><div class="fixed inset-0 bg-black bg-opacity-50 transition-opacity animate-fade-in"></div><div class="fixed inset-0 z-10 overflow-y-auto"><div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0"><div class="relative transform overflow-hidden rounded-lg text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">'),Zs=T("<div><pre>"),en=t=>{let e;const[r]=vt(t,["onOpen","onClose","isOpen","value"]),[s,n]=(de(()=>{e&&(e.innerHTML=function(i){return(i=(i=typeof i!="string"?JSON.stringify(i,void 0,2):i).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(c){let u="number";return/^"/.test(c)?u=/:$/.test(c)?"key":"string":/true|false/.test(c)?u="boolean":/null/.test(c)&&(u="null"),'<span class="'+u+'">'+c+"</span>"})}(JSON.stringify(t==null?void 0:t.value,void 0,2)))}),q(r.isOpen??!1)),o=(ue(()=>{sr(t.isOpen)||t.isOpen===s()||l()}),i=>{i.stopPropagation()}),a=()=>{var i;n(!1),(i=r.onClose)==null||i.call(r),document.body.style.overflow="auto"},l=()=>{var i;s()?a():(n(!0),(i=r.onOpen)==null||i.call(r),document.body.style.overflow="hidden")};return C(G,{get when(){return s()},get children(){return[(O(u=Ks(),Ve),u),(u=Qs(),i=u.firstChild,c=i.nextSibling.nextSibling.firstChild.firstChild,u.style.setProperty("z-index","1100"),u.addEventListener("click",a),O(i,Ve),c.style.setProperty("background-color","transparent"),c.style.setProperty("margin-left","20px"),c.style.setProperty("margin-right","20px"),c.addEventListener("click",o),c.addEventListener("pointerdown",o),O(c,(()=>{const p=H(()=>!!t.value);return()=>{return p()&&(f=(h=Zs()).firstChild,h.style.setProperty("background","white"),h.style.setProperty("margin","auto"),h.style.setProperty("padding","7px"),typeof(d=e)=="function"?ie(d,f):e=f,h);var h,f,d}})()),u)];var i,c,u}})},it=T("<div>"),tn=T('<span class="px-3 whitespace-pre-wrap font-semibold max-w-full">'),rn=T("<span>Clear"),sn=T('<div><div class="flex w-full h-full justify-center"><div class="overflow-y-scroll min-w-full w-full min-h-full px-3 pt-10 relative scrollable-container chatbot-chat-view scroll-smooth"></div><div><div>'),nn=T('<div class="w-full h-32">'),Ne="Hi there! How can I help?",mr=t=>{let e,r,s;const[n,o]=q(""),[a,l]=q(!1),[i,c]=q(!1),[u,p]=q({}),[h,f]=q([{message:t.welcomeMessage??Ne,type:"apiMessage"}],{equals:!1}),[d,m]=q(""),[R,v]=q(!1),[b,$]=q(jt()),[x,B]=q([],{equals:!1}),z=(de(()=>{r&&setTimeout(()=>{e==null||e.scrollTo(0,e.scrollHeight)},50)}),()=>{setTimeout(()=>{e==null||e.scrollTo(0,e.scrollHeight)},50)}),N=S=>{localStorage.setItem(t.chatflowid+"_EXTERNAL",JSON.stringify({chatId:b(),chatHistory:S}))},le=S=>{f(L=>{var w=L.map((_,A)=>A===L.length-1?{..._,message:_.message+S}:_);return N(w),[...w]})},wr=S=>{f(L=>{var w=L.map((_,A)=>A===L.length-1?{..._,sourceDocuments:S}:_);return N(w),[...w]})},Ct=async S=>{if(o(S),S.trim()!==""){l(!0),z();const _=t.welcomeMessage??Ne;var L,w=h().filter(A=>A.message!==_);if(w=(f(A=>(A=[...A,{message:S,type:"userMessage"}],N(A),A)),{question:S,history:w,chatId:b()}),w=(t.chatflowConfig&&(w.overrideConfig=t.chatflowConfig),R()&&(w.socketIOClientId=d()),await(({chatflowid:A,apiHost:te="http://localhost:3000",body:g})=>Ie({method:"POST",url:te+"/api/v1/prediction/"+A,body:g}))({chatflowid:t.chatflowid,apiHost:t.apiHost,body:w})),w.data){const A=w.data;if(!R()){let te="";te=A.text||(A.json?JSON.stringify(A.json,null,2):JSON.stringify(A,null,2)),f(g=>(g=[...g,{message:te,sourceDocuments:A==null?void 0:A.sourceDocuments,fileAnnotations:A==null?void 0:A.fileAnnotations,type:"apiMessage"}],N(g),g))}l(!1),o(""),z()}w.error&&(w=w.error,console.error(w),w=typeof w=="string"?w:w.response.data||w.response.status+": "+w.response.statusText,[L="Oops! There seems to be an error. Please try again."]=[w],f(A=>(A=[...A,{message:L,type:"apiMessage"}],N(A),A)),l(!1),o(""),z())}},vr=()=>{try{localStorage.removeItem(t.chatflowid+"_EXTERNAL"),$(jt()),f([{message:t.welcomeMessage??Ne,type:"apiMessage"}])}catch(L){var S=L.response.data||L.response.status+": "+L.response.statusText;console.error("error: "+S)}},Je=(ue(()=>{h()&&z()}),ue(()=>{t.fontSize&&s&&(s.style.fontSize=t.fontSize+"px")}),ue(async()=>{var S=((S=localStorage.getItem(t.chatflowid+"_EXTERNAL"))&&(S=JSON.parse(S),$(S.chatId),S=S.chatHistory.map(w=>{var _={message:w.message,type:w.type};return w.sourceDocuments&&(_.sourceDocuments=w.sourceDocuments),w.fileAnnotations&&(_.fileAnnotations=w.fileAnnotations),_}),f([...S])),await(({chatflowid:w,apiHost:_="http://localhost:3000"})=>Ie({method:"GET",url:_+"/api/v1/chatflows-streaming/"+w}))({chatflowid:t.chatflowid,apiHost:t.apiHost})).data;if(S&&v((S==null?void 0:S.isStreaming)??!1),S=await(({chatflowid:w,apiHost:_="http://localhost:3000"})=>Ie({method:"GET",url:_+"/api/v1/public-chatbotConfig/"+w}))({chatflowid:t.chatflowid,apiHost:t.apiHost}),S.data){let w=S.data;if(w.starterPrompts){const _=[];Object.getOwnPropertyNames(w.starterPrompts).forEach(A=>{_.push(w.starterPrompts[A].prompt)}),B(_)}}const L=qe(t.apiHost);return L.on("connect",()=>{m(L.id)}),L.on("start",()=>{f(w=>[...w,{message:"",type:"apiMessage"}])}),L.on("sourceDocuments",wr),L.on("token",le),()=>{o(""),l(!1),f([{message:t.welcomeMessage??Ne,type:"apiMessage"}]),L&&(L.disconnect(),m(""))}}),S=>{try{return new URL(S)}catch{}});return[(()=>{const S=sn(),L=S.firstChild,w=L.firstChild,_=w.nextSibling,A=_.firstChild;var te;return typeof(te=(typeof(te=s)=="function"?ie(te,S):s=S,e))=="function"?ie(te,w):e=w,w.style.setProperty("padding-bottom","100px"),w.style.setProperty("padding-top","70px"),O(w,C(et,{get each(){return[...h()]},children:(g,ce)=>[H((()=>{const V=H(()=>g.type==="userMessage");return()=>V()&&C(ds,{get message(){return g.message},get backgroundColor(){var E;return(E=t.userMessage)==null?void 0:E.backgroundColor},get textColor(){var E;return(E=t.userMessage)==null?void 0:E.textColor},get showAvatar(){var E;return(E=t.userMessage)==null?void 0:E.showAvatar},get avatarSrc(){var E;return(E=t.userMessage)==null?void 0:E.avatarSrc}})})()),H((()=>{const V=H(()=>g.type==="apiMessage");return()=>V()&&C(gs,{get message(){return g.message},get fileAnnotations(){return g.fileAnnotations},get apiHost(){return t.apiHost},get backgroundColor(){var E;return(E=t.botMessage)==null?void 0:E.backgroundColor},get textColor(){var E;return(E=t.botMessage)==null?void 0:E.textColor},get showAvatar(){var E;return(E=t.botMessage)==null?void 0:E.showAvatar},get avatarSrc(){var E;return(E=t.botMessage)==null?void 0:E.avatarSrc}})})()),H((()=>{const V=H(()=>!(g.type!=="userMessage"||!a()||ce()!==h().length-1));return()=>V()&&C(ws,{})})()),H((()=>{const V=H(()=>!(!g.sourceDocuments||!g.sourceDocuments.length));return()=>{return V()&&((E=it()).style.setProperty("display","flex"),E.style.setProperty("flex-direction","row"),E.style.setProperty("width","100%"),O(E,C(et,{get each(){return[...(Y=>{const K=[],he=[];return Y.sourceDocuments.forEach(fe=>{Je(fe.metadata.source)&&!K.includes(fe.metadata.source)?(K.push(fe.metadata.source),he.push(fe)):Je(fe.metadata.source)||he.push(fe)}),he})(g)]},children:Y=>{const K=Je(Y.metadata.source);return C(xs,{get pageContent(){return K?K.pathname:Y.pageContent},get metadata(){return Y.metadata},onSourceClick:()=>{K?window.open(Y.metadata.source,"_blank"):(p(Y),c(!0))}})}})),E);var E}})())]})),_.style.setProperty("display","flex"),_.style.setProperty("flex-direction","row"),_.style.setProperty("align-items","center"),_.style.setProperty("height","50px"),_.style.setProperty("top","0"),_.style.setProperty("left","0"),_.style.setProperty("width","100%"),O(_,C(G,{get when(){return t.titleAvatarSrc},get children(){return[((g=it()).style.setProperty("width","15px"),g),C(xt,{get initialAvatarSrc(){return t.titleAvatarSrc}})];var g}}),A),O(_,C(G,{get when(){return t.title},get children(){var g=tn();return O(g,()=>t.title),g}}),A),A.style.setProperty("flex","1"),O(_,C(Qr,{get sendButtonColor(){return t.bubbleTextColor},type:"button",get isDisabled(){return h().length===1},class:"my-2 ml-2","on:click":vr,get children(){var g=rn();return g.style.setProperty("font-family","Poppins, sans-serif"),g}}),null),O(L,C(ts,{get backgroundColor(){var g;return(g=t.textInput)==null?void 0:g.backgroundColor},get textColor(){var g;return(g=t.textInput)==null?void 0:g.textColor},get placeholder(){var g;return(g=t.textInput)==null?void 0:g.placeholder},get sendButtonColor(){var g;return(g=t.textInput)==null?void 0:g.sendButtonColor},get fontSize(){return t.fontSize},get disabled(){return a()},get defaultValue(){return n()},onSubmit:Ct}),null),O(S,C(G,{get when(){return h().length===1},get children(){return C(G,{get when(){return 0<x().length},get children(){var g=it();return g.style.setProperty("display","flex"),g.style.setProperty("flex-direction","row"),g.style.setProperty("padding","10px"),g.style.setProperty("width","100%"),g.style.setProperty("flex-wrap","wrap"),O(g,C(et,{get each(){return[...x()]},children:ce=>C(_s,{prompt:ce,onPromptClick:()=>{Ct(ce)}})})),g}})}}),null),O(S,C(Ss,{get badgeBackgroundColor(){return t.badgeBackgroundColor},get poweredByTextColor(){return t.poweredByTextColor},botContainer:s}),null),O(S,C(on,{ref(g){typeof r=="function"?r(g):r=g}}),null),M(g=>{var ce="relative flex w-full h-full text-base overflow-hidden bg-cover bg-center flex-col items-center chatbot-container "+t.class,V=t.isFullPage?"fixed":"absolute",E=t.bubbleBackgroundColor,Y=t.bubbleTextColor,K=t.isFullPage?"0px":"6px",he=t.isFullPage?"0px":"6px";return ce!==g._v$&&pe(S,g._v$=ce),V!==g._v$2&&((g._v$2=V)!=null?_.style.setProperty("position",V):_.style.removeProperty("position")),E!==g._v$3&&((g._v$3=E)!=null?_.style.setProperty("background",E):_.style.removeProperty("background")),Y!==g._v$4&&((g._v$4=Y)!=null?_.style.setProperty("color",Y):_.style.removeProperty("color")),K!==g._v$5&&((g._v$5=K)!=null?_.style.setProperty("border-top-left-radius",K):_.style.removeProperty("border-top-left-radius")),he!==g._v$6&&((g._v$6=he)!=null?_.style.setProperty("border-top-right-radius",he):_.style.removeProperty("border-top-right-radius")),g},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0,_v$6:void 0}),S})(),H((()=>{const S=H(()=>!!i());return()=>S()&&C(en,{get isOpen(){return i()},get value(){return u()},onClose:()=>c(!1)})})())]},on=t=>{return e=nn(),typeof(r=t.ref)=="function"?ie(r,e):t.ref=e,e;var e,r},an=T("<style>"),ln=T('<div part="bot">'),cn=t=>{const[e]=vt(t,["theme"]),[r,s]=q(!1),[n,o]=q(!1);var a;return[(O(a=an(),Ve),a),C(qr,ve(()=>{var l;return(l=e.theme)==null?void 0:l.button},{toggleBot:()=>{r()?s(!1):(n()||o(!0),s(!0))},get isBotOpened(){return r()}})),(()=>{const l=ln();return l.style.setProperty("transition","transform 200ms cubic-bezier(0, 1.2, 1, 1), opacity 150ms ease-out"),l.style.setProperty("transform-origin","bottom right"),l.style.setProperty("box-shadow","rgb(0 0 0 / 16%) 0px 5px 40px"),l.style.setProperty("z-index","42424242"),O(l,C(G,{get when(){return n()},get children(){return C(mr,{get badgeBackgroundColor(){var i,c;return(c=(i=e.theme)==null?void 0:i.chatWindow)==null?void 0:c.backgroundColor},get bubbleBackgroundColor(){var i,c;return((c=(i=e.theme)==null?void 0:i.button)==null?void 0:c.backgroundColor)??"#3B81F6"},get bubbleTextColor(){var i,c;return((c=(i=e.theme)==null?void 0:i.button)==null?void 0:c.iconColor)??"white"},get title(){var i,c;return(c=(i=e.theme)==null?void 0:i.chatWindow)==null?void 0:c.title},get titleAvatarSrc(){var i,c;return(c=(i=e.theme)==null?void 0:i.chatWindow)==null?void 0:c.titleAvatarSrc},get welcomeMessage(){var i,c;return(c=(i=e.theme)==null?void 0:i.chatWindow)==null?void 0:c.welcomeMessage},get poweredByTextColor(){var i,c;return(c=(i=e.theme)==null?void 0:i.chatWindow)==null?void 0:c.poweredByTextColor},get textInput(){var i,c;return(c=(i=e.theme)==null?void 0:i.chatWindow)==null?void 0:c.textInput},get botMessage(){var i,c;return(c=(i=e.theme)==null?void 0:i.chatWindow)==null?void 0:c.botMessage},get userMessage(){var i,c;return(c=(i=e.theme)==null?void 0:i.chatWindow)==null?void 0:c.userMessage},get fontSize(){var i,c;return(c=(i=e.theme)==null?void 0:i.chatWindow)==null?void 0:c.fontSize},get chatflowid(){return t.chatflowid},get chatflowConfig(){return t.chatflowConfig},get apiHost(){return t.apiHost}})}})),M(i=>{var f,d,m,R,v,b,$,x;var c=(d=(f=e.theme)==null?void 0:f.chatWindow)!=null&&d.height?((R=(m=e.theme)==null?void 0:m.chatWindow)==null?void 0:R.height.toString())+"px":"calc(100% - 100px)",u=r()?"scale3d(1, 1, 1)":"scale3d(0, 0, 1)",p=((b=(v=e.theme)==null?void 0:v.chatWindow)==null?void 0:b.backgroundColor)||"#ffffff",h="fixed sm:right-5 rounded-lg w-full sm:w-[400px] max-h-[704px]"+(r()?" opacity-1":" opacity-0 pointer-events-none")+(((x=($=t.theme)==null?void 0:$.button)==null?void 0:x.size)==="large"?" bottom-24":" bottom-20");return c!==i._v$&&((i._v$=c)!=null?l.style.setProperty("height",c):l.style.removeProperty("height")),u!==i._v$2&&((i._v$2=u)!=null?l.style.setProperty("transform",u):l.style.removeProperty("transform")),p!==i._v$3&&((i._v$3=p)!=null?l.style.setProperty("background-color",p):l.style.removeProperty("background-color")),h!==i._v$4&&pe(l,i._v$4=h),i},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),l})()]},hn=T("<style>"),un=T("<div>"),pn=(t,{element:e})=>{const[r,s]=q(!1),n=new IntersectionObserver(a=>{a.some(l=>l.isIntersecting)&&s(!0)});return de(()=>{n.observe(e)}),mt(()=>{n.disconnect()}),[(O(o=hn(),Ve),o),C(G,{get when(){return r()},get children(){const a=un();return a.style.setProperty("margin","0px"),O(a,C(mr,{get badgeBackgroundColor(){var l,i;return(i=(l=t.theme)==null?void 0:l.chatWindow)==null?void 0:i.backgroundColor},get bubbleBackgroundColor(){var l,i;return((i=(l=t.theme)==null?void 0:l.button)==null?void 0:i.backgroundColor)??"#3B81F6"},get bubbleTextColor(){var l,i;return((i=(l=t.theme)==null?void 0:l.button)==null?void 0:i.iconColor)??"white"},get title(){var l,i;return(i=(l=t.theme)==null?void 0:l.chatWindow)==null?void 0:i.title},get titleAvatarSrc(){var l,i;return(i=(l=t.theme)==null?void 0:l.chatWindow)==null?void 0:i.titleAvatarSrc},get welcomeMessage(){var l,i;return(i=(l=t.theme)==null?void 0:l.chatWindow)==null?void 0:i.welcomeMessage},get poweredByTextColor(){var l,i;return(i=(l=t.theme)==null?void 0:l.chatWindow)==null?void 0:i.poweredByTextColor},get textInput(){var l,i;return(i=(l=t.theme)==null?void 0:l.chatWindow)==null?void 0:i.textInput},get botMessage(){var l,i;return(i=(l=t.theme)==null?void 0:l.chatWindow)==null?void 0:i.botMessage},get userMessage(){var l,i;return(i=(l=t.theme)==null?void 0:l.chatWindow)==null?void 0:i.userMessage},get fontSize(){var l,i;return(i=(l=t.theme)==null?void 0:l.chatWindow)==null?void 0:i.fontSize},get chatflowid(){return t.chatflowid},get chatflowConfig(){return t.chatflowConfig},get apiHost(){return t.apiHost},isFullPage:!0})),M(l=>{var p,h,f,d,m,R,v,b,$,x;var i=((h=(p=t.theme)==null?void 0:p.chatWindow)==null?void 0:h.backgroundColor)||"#ffffff",c=(d=(f=t.theme)==null?void 0:f.chatWindow)!=null&&d.height?((R=(m=t.theme)==null?void 0:m.chatWindow)==null?void 0:R.height.toString())+"px":"100vh",u=(b=(v=t.theme)==null?void 0:v.chatWindow)!=null&&b.width?((x=($=t.theme)==null?void 0:$.chatWindow)==null?void 0:x.width.toString())+"px":"100%";return i!==l._v$&&((l._v$=i)!=null?a.style.setProperty("background-color",i):a.style.removeProperty("background-color")),c!==l._v$2&&((l._v$2=c)!=null?a.style.setProperty("height",c):a.style.removeProperty("height")),u!==l._v$3&&((l._v$3=u)!=null?a.style.setProperty("width",u):a.style.removeProperty("width")),l},{_v$:void 0,_v$2:void 0,_v$3:void 0}),a}})];var o},dn=t=>{var e=t.id?document.getElementById(t.id):document.querySelector("flowise-fullchatbot");if(!e)throw new Error("<flowise-fullchatbot> element not found.");Object.assign(e,t)},fn=t=>{var e=document.createElement("flowise-chatbot");Object.assign(e,t),document.body.appendChild(e)},gn=(typeof window<"u"&&(Ot("flowise-fullchatbot",Bt,pn),Ot("flowise-chatbot",Bt,cn)),{initFull:dn,init:fn});(t=>{typeof window<"u"&&(window.Chatbot={...t})})(gn);export{gn as default};
